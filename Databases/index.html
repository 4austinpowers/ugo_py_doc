



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A Python documentation website.">
      
      
        <link rel="canonical" href="https://ugoproto.github.io/ugo_py_doc/Databases/">
      
      
        <meta name="author" content="Ugo Sparks">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.3">
    
    
      
        <title>Databases - ugo_py_doc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#ffa000">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="amber" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#sqlite3-cli" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://ugoproto.github.io/ugo_py_doc/" title="ugo_py_doc" class="md-header-nav__button md-logo">
          
            <i class="md-icon">layers</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ugo_py_doc
              </span>
              <span class="md-header-nav__topic">
                Databases
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/ugoproto/ugo_py_doc.git/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      ugo_py_doc
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://ugoproto.github.io/ugo_py_doc/" title="ugo_py_doc" class="md-nav__button md-logo">
      
        <i class="md-icon">layers</i>
      
    </a>
    ugo_py_doc
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/ugoproto/ugo_py_doc.git/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      ugo_py_doc
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Basics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Py_CS/" title="Python Cheat Sheets" class="md-nav__link">
      Python Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python_Preliminaries/" title="Python Preliminaries" class="md-nav__link">
      Python Preliminaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python_Nice_to_Have/" title="Python Nice to Have" class="md-nav__link">
      Python Nice to Have
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Freeze_the_Code/" title="Freeze the Code" class="md-nav__link">
      Freeze the Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Decorators/" title="Decorators" class="md-nav__link">
      Decorators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Write_Better_Python/" title="Write Better Python with PEP" class="md-nav__link">
      Write Better Python with PEP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Regex/" title="Regular Expressions (regex)" class="md-nav__link">
      Regular Expressions (regex)
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Databases
      </label>
    
    <a href="./" title="Databases" class="md-nav__link md-nav__link--active">
      Databases
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sqlite3-cli" title="SQLite3 CLI" class="md-nav__link">
    SQLite3 CLI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-database-gui-administration-and-management-tools" title="SQL Database GUI, Administration, and Management Tools" class="md-nav__link">
    SQL Database GUI, Administration, and Management Tools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spreadsheet-data-and-sqlite" title="Spreadsheet Data and SQLite" class="md-nav__link">
    Spreadsheet Data and SQLite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#r-and-python-with-sql" title="R and Python with SQL" class="md-nav__link">
    R and Python with SQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-chinook-sqlite-sample-database" title="The Chinook SQLite Sample Database" class="md-nav__link">
    The Chinook SQLite Sample Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-python-orm-peewee" title="Using a Python ORM: peewee" class="md-nav__link">
    Using a Python ORM: peewee
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-peewee" title="Install peewee" class="md-nav__link">
    Install peewee
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-database-with-a-script" title="Create a database with a script" class="md-nav__link">
    Create a database with a script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-read-update-and-delete-crud" title="Create, read, update, and delete (CRUD)" class="md-nav__link">
    Create, read, update, and delete (CRUD)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-diary-app-a-case" title="A diary app -- A Case" class="md-nav__link">
    A diary app -- A Case
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-diary-app-the-skeleton-empty-classes-and-functions" title="A diary app -- The skeleton (empty classes and functions)" class="md-nav__link">
    A diary app -- The skeleton (empty classes and functions)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-initialize" title="A diary app -- Initialize" class="md-nav__link">
    A diary app -- Initialize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-create-a-menu" title="A diary app -- Create a menu" class="md-nav__link">
    A diary app -- Create a menu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-data-entry" title="A diary app -- Data entry" class="md-nav__link">
    A diary app -- Data entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-search-and-view-entries" title="A diary app -- Search and view entries" class="md-nav__link">
    A diary app -- Search and view entries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-delete-entries" title="A diary app -- Delete entries" class="md-nav__link">
    A diary app -- Delete entries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-finalize-and-polish-up" title="A diary app -- Finalize and polish up" class="md-nav__link">
    A diary app -- Finalize and polish up
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Datetime/" title="Datetime" class="md-nav__link">
      Datetime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Gedit_Execute_Highlighted_Python_Code/" title="Gedit, Execute Highlighted Python Code" class="md-nav__link">
      Gedit, Execute Highlighted Python Code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Scipy Stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Scipy Stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Scipy_CS/" title="Scipy Stack Cheat Sheets" class="md-nav__link">
      Scipy Stack Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JN_CS/" title="Jupyter Notebook Cheat Sheets" class="md-nav__link">
      Jupyter Notebook Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Importing Data into Python/" title="Importing Data into Python" class="md-nav__link">
      Importing Data into Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Vectors and Arrays (Linear Algebra)/" title="Vectors and Arrays (Linear Algebra)" class="md-nav__link">
      Vectors and Arrays (Linear Algebra)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Viewing+3D+Volumetric+Data+With+Matplotlib/" title="Viewing 3D Volumetric Data with Matplotlib" class="md-nav__link">
      Viewing 3D Volumetric Data with Matplotlib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Write Idiomatic Pandas Code/" title="Write Idiomatic Pandas Code" class="md-nav__link">
      Write Idiomatic Pandas Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Exploratory Data Analysis/" title="Exploratory Data Analysis (EDA)" class="md-nav__link">
      Exploratory Data Analysis (EDA)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Intro to data.world in Python/" title="Introduction to data.world in Python" class="md-nav__link">
      Introduction to data.world in Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python+And+Excel/" title="Python and Excel" class="md-nav__link">
      Python and Excel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Overview_of_scikit-learn/" title="Overview of scikit-learn" class="md-nav__link">
      Overview of scikit-learn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../k-NN_Linear_regression_Logit_Scaling_Centering_Noise/" title="k-NN, Linear regression, Logit, Scaling, Centering, Noise" class="md-nav__link">
      k-NN, Linear regression, Logit, Scaling, Centering, Noise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Time_Series_Analysis/" title="Time Series Analysis" class="md-nav__link">
      Time Series Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Sentiment_Analysis_with_Twitter/" title="Sentiment Analysis with Twitter" class="md-nav__link">
      Sentiment Analysis with Twitter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EDA_Machine_Learning_Feature_Engineering_and_Kaggle/" title="EDA, Machine Learning, Feature Engineering, and Kaggle" class="md-nav__link">
      EDA, Machine Learning, Feature Engineering, and Kaggle
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Courses
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Courses
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Apprenez a programmer en Python/" title="Apprenez à programmer en Python" class="md-nav__link">
      Apprenez à programmer en Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Codecademy Python/" title="Codecademy Python" class="md-nav__link">
      Codecademy Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Learn Python the Hard Way/" title="Learn Python the Hard Way" class="md-nav__link">
      Learn Python the Hard Way
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../LPTHW, Python Code Snippets/" title="LPTHW, Python Code Snippets" class="md-nav__link">
      LPTHW, Python Code Snippets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Manuals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Manuals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Automate the Boring Stuff with Python/" title="Automate the Boring Stuff with Python" class="md-nav__link">
      Automate the Boring Stuff with Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Managing Your Biological Data with Python/" title="Managing Your Biological Data with Python" class="md-nav__link">
      Managing Your Biological Data with Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python for Education/" title="Python for Education" class="md-nav__link">
      Python for Education
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sqlite3-cli" title="SQLite3 CLI" class="md-nav__link">
    SQLite3 CLI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-database-gui-administration-and-management-tools" title="SQL Database GUI, Administration, and Management Tools" class="md-nav__link">
    SQL Database GUI, Administration, and Management Tools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#spreadsheet-data-and-sqlite" title="Spreadsheet Data and SQLite" class="md-nav__link">
    Spreadsheet Data and SQLite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#r-and-python-with-sql" title="R and Python with SQL" class="md-nav__link">
    R and Python with SQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-chinook-sqlite-sample-database" title="The Chinook SQLite Sample Database" class="md-nav__link">
    The Chinook SQLite Sample Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-python-orm-peewee" title="Using a Python ORM: peewee" class="md-nav__link">
    Using a Python ORM: peewee
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-peewee" title="Install peewee" class="md-nav__link">
    Install peewee
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-database-with-a-script" title="Create a database with a script" class="md-nav__link">
    Create a database with a script
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-read-update-and-delete-crud" title="Create, read, update, and delete (CRUD)" class="md-nav__link">
    Create, read, update, and delete (CRUD)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-diary-app-a-case" title="A diary app -- A Case" class="md-nav__link">
    A diary app -- A Case
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-diary-app-the-skeleton-empty-classes-and-functions" title="A diary app -- The skeleton (empty classes and functions)" class="md-nav__link">
    A diary app -- The skeleton (empty classes and functions)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-initialize" title="A diary app -- Initialize" class="md-nav__link">
    A diary app -- Initialize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-create-a-menu" title="A diary app -- Create a menu" class="md-nav__link">
    A diary app -- Create a menu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-data-entry" title="A diary app -- Data entry" class="md-nav__link">
    A diary app -- Data entry
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-search-and-view-entries" title="A diary app -- Search and view entries" class="md-nav__link">
    A diary app -- Search and view entries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-delete-entries" title="A diary app -- Delete entries" class="md-nav__link">
    A diary app -- Delete entries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#a-diary-app-finalize-and-polish-up" title="A diary app -- Finalize and polish up" class="md-nav__link">
    A diary app -- Finalize and polish up
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ugoproto/ugo_py_doc.git/edit/master/docs/Databases.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Databases</h1>
                
                <!--
---

[TOC]
-->

<hr />
<p><strong>Foreword</strong></p>
<p>Notes. Python 3. Consult the <a href="http://docs.python-guide.org/en/latest/">Hitchicker&rsquo;s Guide to Python</a>.<br />
Although we work with SQLite, most concepts are applicable to MySQL and PostgreSQL.</p>
<hr />
<h3 id="sqlite3">SQLite3<a class="headerlink" href="#sqlite3" title="Permanent link">&para;</a></h3>
<p>Follow the tutorial on <a href="https://www.tutorialspoint.com">TutorialPoint</a>. Especially the <a href="https://www.tutorialspoint.com/sqlite/sqlite_quick_guide.htm">Quick Guide</a> for installation, basic commands, syntax, comments, SQL statement, data type, affinity type, boolean, date &amp; time, creating a database, a table, dropping a table, querying, operators, expressions, and clauses. Each topic has also a dedicated section such as unions, joins, truncated table, etc.</p>
<ul>
<li>Install.<ul>
<li>Download from the <a href="http://www.sqlite.org/download.html">SQLite website</a>.</li>
<li>Follow the Quick Guide (or find instruction online).</li>
<li>On Windows, databases are located on C:\sqlite.</li>
<li>On Linux, SQLite is in the root directory(/usr/lib/&hellip;), but databases can be stored in the Personal folder (or in a directory of choice; for example, in a new subdirectory under Documents).</li>
</ul>
</li>
</ul>
<h3 id="sqlite3-cli">SQLite3 CLI<a class="headerlink" href="#sqlite3-cli" title="Permanent link">&para;</a></h3>
<p><strong>Basics</strong></p>
<ul>
<li>In the shell/bash:<ul>
<li><code class="codehilite">sqlite3 test.db</code>, create a database/open the database (show the prompt); the database is located in SQLite&rsquo;s directory.</li>
</ul>
</li>
<li>Basic commands inside a database.<ul>
<li><code class="codehilite"><span class="na">.help</span></code>.</li>
<li><code class="codehilite"><span class="na">.databases</span></code>, show all databases.</li>
<li><code class="codehilite">create table first (a int, b string);</code>, create a table with two fields.</li>
<li><code class="codehilite"><span class="na">.schema</span></code>, show the last commands.</li>
<li><code class="codehilite"><span class="na">.tables</span></code>, show all tables in the database.</li>
<li><code class="codehilite">insert into first (a, b) values (1, &quot;hello&quot;);</code>, load the table.</li>
<li><code class="codehilite">select * from first;</code>, extract all values from the table.</li>
<li><code class="codehilite"><span class="na">.quit</span></code> or <code class="codehilite"><span class="na">.exit</span></code>.</li>
<li><code class="codehilite">drop table first;</code>, delete a table (first).</li>
<li>Delete a database by deleting the database file in the directory.</li>
</ul>
</li>
<li>Intermediate commands.<ul>
<li><code class="codehilite"><span class="na">.mode</span> <span class="no">insert</span></code>, change the view (insertions to build the database).</li>
<li><code class="codehilite"><span class="na">.dump</span></code>, dump data on screen.</li>
<li><code class="codehilite"><span class="na">.output</span> <span class="p">.</span><span class="err">\</span><span class="no">Documents</span><span class="err">\</span><span class="no">sqlite3Files.sql</span></code>, create a folder in a file (Windows).</li>
<li><code class="codehilite"><span class="na">.output</span> <span class="p">.</span><span class="err">/</span><span class="no">Documents</span><span class="err">/</span><span class="no">sqlite3Files.sql</span></code>, create a folder in a file (UNIX-based).<ul>
<li><code class="codehilite"><span class="na">.dump</span></code>, dump data into the above. VERY USEFUL for recreating a database/table.</li>
</ul>
</li>
<li><code class="codehilite"><span class="na">.output</span> <span class="no">stdout</span></code>, to the screen.</li>
<li><code class="codehilite"><span class="na">.mode</span> <span class="no">column</span></code>, change the view (flat table with fixed width).<br />
        - <code class="codehilite"><span class="na">.width</span> <span class="mi">15</span> <span class="mi">20</span></code>, define the width by column.<ul>
<li><code class="codehilite"><span class="na">.output</span> <span class="p">.</span><span class="err">/</span><span class="no">Documents</span><span class="err">/</span><span class="no">sqlite3Files</span><span class="err">/</span><span class="no">table.sql</span></code>, prepare the dump.</li>
<li><code class="codehilite">select * from table;</code>, extract.</li>
<li><code class="codehilite"><span class="na">.output</span> <span class="no">stdout</span></code>, dump the data.</li>
</ul>
</li>
<li><code class="codehilite"><span class="na">.mode</span> <span class="no">line</span></code>, change the view (long list without commas).<ul>
<li>Idem.</li>
</ul>
</li>
<li><code class="codehilite"><span class="na">.mode</span> <span class="no">html</span></code>, change the view (html formats ready to be dumbed).<ul>
<li><code class="codehilite"><span class="na">.output</span> <span class="p">.</span><span class="err">/</span><span class="no">Documents</span><span class="err">/</span><span class="no">sqlite3Files</span><span class="err">/</span><span class="no">table.html</span></code>, prepare the dump.</li>
<li><code class="codehilite">select * from table;</code>, extract.</li>
<li><code class="codehilite"><span class="na">.output</span> <span class="no">stdout</span></code>, dump the data.</li>
</ul>
</li>
<li><code class="codehilite"><span class="na">.mode</span> <span class="no">tabs</span></code>, change the view (flat table separated by tabs).<ul>
<li><code class="codehilite"><span class="na">.output</span> <span class="p">.</span><span class="err">/</span><span class="no">Documents</span><span class="err">/</span><span class="no">sqlite3Files</span><span class="err">/</span><span class="no">table.tsv</span></code>, prepare the dump.</li>
<li><code class="codehilite">select * from table;</code>, extract.</li>
<li><code class="codehilite"><span class="na">.output</span> <span class="no">stdout</span></code>, dump the data.</li>
</ul>
</li>
<li><code class="codehilite"><span class="na">.mode</span> <span class="no">csv</span></code>, change the view (flat table separated by commas or semi-colons).<ul>
<li><code class="codehilite"><span class="na">.separator</span> <span class="c">;</span></code>, change the separator.</li>
<li><code class="codehilite"><span class="na">.output</span> <span class="p">.</span><span class="err">/</span><span class="no">Documents</span><span class="err">/</span><span class="no">sqlite3Files</span><span class="err">/</span><span class="no">table.csv</span></code>, prepare the dump.</li>
<li><code class="codehilite">select * from table;</code>, extract.</li>
<li><code class="codehilite"><span class="na">.output</span> <span class="no">stdout</span></code>, dump the data.</li>
</ul>
</li>
<li><code class="codehilite"><span class="na">.mode</span> <span class="no">tcs</span></code>, change the view (flat table with double-quotes).</li>
<li><code class="codehilite"><span class="na">.headers</span> <span class="no">on</span></code>, show the headers.</li>
<li><code class="codehilite"><span class="na">.show</span></code>, show the (above) parameters (and change them).</li>
<li><code class="codehilite"><span class="na">.prompt</span> <span class="err">&#39;</span><span class="no">sqlite3</span><span class="err">&gt;</span> <span class="err">&#39;</span></code>, change the prompt.</li>
<li><code class="codehilite"><span class="na">.read</span> <span class="err">&lt;</span><span class="no">path</span><span class="err">&gt;</span></code>, repopulate the database with the above.</li>
</ul>
</li>
</ul>
<p><strong>Advanced</strong></p>
<p>There are plenty of resources about SQLite: books, online documents, online tutorials, etc. We can learn how to:</p>
<ul>
<li>Build a database, tables.</li>
<li>Query a database, create, alter, select, order by, limit, offset, update, delete, and other functions.</li>
<li>Joins and Triggers.</li>
<li>And more.</li>
</ul>
<h3 id="sql-database-gui-administration-and-management-tools">SQL Database GUI, Administration, and Management Tools<a class="headerlink" href="#sql-database-gui-administration-and-management-tools" title="Permanent link">&para;</a></h3>
<p>With database managers, we can create scripts to automate operations.</p>
<ul>
<li>SQLite is free, open source, and cross-platform.<ul>
<li>DB Browser for SQLite is free, for all OS.</li>
<li>Add-ons to browsers such as the SQLite Managers for Firefox.</li>
</ul>
</li>
<li>MySQL is free, open source, and cross-platform.<ul>
<li>MySQL Workbench is free, for all OS.<ul>
<li>Database Design &amp; Modeling, SQL Development (replacing MySQL Query Browser), and Database Administration (replacing MySQL Administrator). MySQL features: SQL editor, SQL code completion, SQL code formatter, SQL Syntax highlighting, server start/stop, server status/health, server logs, server/replication configuration, user management, session management, and much more.</li>
</ul>
</li>
<li>There are web-based managers.</li>
</ul>
</li>
<li>PostgreSQL is free, open source, also cross-platform.<ul>
<li>pgAdminIII.</li>
<li>There are web-based managers.</li>
</ul>
</li>
<li>SQL in general.<ul>
<li>DB Browser is free, for all OS.</li>
<li>phpMyAdmin is free, for all OS.</li>
<li>Toad is free, for Windows.</li>
<li>HeidiSQL is free, for Windows.</li>
<li>There are web-based managers.</li>
</ul>
</li>
</ul>
<h3 id="spreadsheet-data-and-sqlite">Spreadsheet Data and SQLite<a class="headerlink" href="#spreadsheet-data-and-sqlite" title="Permanent link">&para;</a></h3>
<p><strong>Import from the spreadsheet</strong></p>
<ul>
<li>Pull data from the spreadsheet into SQLite via an add-on or a database manager (automated procedure).</li>
<li>Or export data (save as) from the spreadsheet into a .csv file.</li>
<li>Import the .csv into SQLite.<ul>
<li>In can be done with a manager such as DB Browser for SQLite.</li>
<li>It can be done with a web-based manager such as SQLite Managers for Firefox.</li>
<li>Adjust the general and field parameters.</li>
<li>Create a primary key.</li>
<li>Populate a table with the .csv file.</li>
</ul>
</li>
</ul>
<p><strong>Import into a spreadsheet</strong></p>
<ul>
<li>Dump the data from the CLI or a database manager into a .csv file.</li>
<li>Or connect the spreadsheet with SQLite with built-in functionalities or add-ons to pull data into the database.</li>
<li>There are add-ons that can execute SQL queries in a cell and dump the results in other cells: Excellic, Microsoft SQL Server Data Mining, SaveToDB, Database Connection Wizard, Publish Wizard, etc.</li>
</ul>
<h3 id="r-and-python-with-sql">R and Python with SQL<a class="headerlink" href="#r-and-python-with-sql" title="Permanent link">&para;</a></h3>
<ul>
<li>R can import data from / export data to relational databases using specialized packages such as <code class="codehilite">DBI</code>, <code class="codehilite">RSQLite</code>, <code class="codehilite">RMySQL</code>, <code class="codehilite">RPostgreSQL</code>, etc.</li>
<li>Python libraries are: <code class="codehilite">python-sql</code>, <code class="codehilite">sqlalchemy</code>, <code class="codehilite">records</code>, <code class="codehilite">peewee</code>, etc.<ul>
<li><code class="codehilite">pip install &lt;library&gt;</code>.    </li>
</ul>
</li>
</ul>
<h3 id="the-chinook-sqlite-sample-database">The Chinook SQLite Sample Database<a class="headerlink" href="#the-chinook-sqlite-sample-database" title="Permanent link">&para;</a></h3>
<p>Learn, practice, and test commands with a fake database. </p>
<ul>
<li>Download the <a href="http://chinookdatabase.codeplex.com/">database</a>.</li>
<li>Consult the <a href="SQLite Sample Database
http://www.sqlitetutorial.net/sqlite-sample-database/">diagram</a>.<ul>
<li>We can also download the database and diagrams.</li>
</ul>
</li>
</ul>
<h3 id="using-a-python-orm-peewee">Using a Python ORM: <code class="codehilite">peewee</code><a class="headerlink" href="#using-a-python-orm-peewee" title="Permanent link">&para;</a></h3>
<h4 id="install-peewee">Install <code class="codehilite">peewee</code><a class="headerlink" href="#install-peewee" title="Permanent link">&para;</a></h4>
<p>We can run queries with SQL or use a Python wrapper: <code class="codehilite">peewee</code>. It is a lightweight Object Relational Mapper (ORM). <code class="codehilite">peewee</code> works with SQLite, MySQL, and PostgreSQL.</p>
<p>Install it with pip.</p>
<p>We can manage our databases with Python scripts.</p>
<h4 id="create-a-database-with-a-script">Create a database with a script<a class="headerlink" href="#create-a-database-with-a-script" title="Permanent link">&para;</a></h4>
<p>In <code class="codehilite">peewee</code>, models are Python classes. Everything in the database is an object: tables, rows, columns, entries, etc.</p>
<p>We create a new database, <code class="codehilite">students.db</code>, with Python. We connect to the database and create two fields with their SQL parameters. We run the script in the terminal.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\students.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span> <span class="c1"># use a singular name convention</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># varchar, unique value, no duplicates</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># if not supplies, it inputs 0 by default</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span> <span class="c1"># a class inside a class (meta-class)</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> <span class="c1"># for running the script directly, not import it</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Student</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c1"># safe is a mandatory convention</span>
</pre></div>
</td></tr></table>

<p>We get no result in the terminal: a good sign. Check out the database to see the results.</p>
<p>The script runs on Windows in Python 2. In Python 3, we would need minor adjustments; they are documented along the way. In addition, in UNIX-based OS, we would need two extra lines at the top of the script.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
</pre></div>
</td></tr></table>

<p>Or.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/usr/bin/env python 3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
</pre></div>
</td></tr></table>

<h4 id="create-read-update-and-delete-crud">Create, read, update, and delete (CRUD)<a class="headerlink" href="#create-read-update-and-delete-crud" title="Permanent link">&para;</a></h4>
<p>Create, read, update, and delete is knows as CRUD; the backbone of ORM. Five useful methods:</p>
<ul>
<li><code class="codehilite"><span class="na">.create</span><span class="p">()</span></code>, add a new record to the table.</li>
<li><code class="codehilite"><span class="na">.select</span><span class="p">()</span></code>, pick rows out of the table.</li>
<li><code class="codehilite"><span class="na">.save</span><span class="p">()</span></code>, update an existing row in a table.</li>
<li><code class="codehilite"><span class="na">.get</span><span class="p">()</span></code>, fetch a single record from a table.</li>
<li><code class="codehilite"><span class="na">.delete_instance</span><span class="p">()</span></code>, delete a row from a table.</li>
</ul>
<p>Improve the script, but avoid the false start&hellip;</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\students.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="c1"># ADD a dictionary</span>
<span class="n">students</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;kennethliff&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">4888</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;chalkers&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">11912</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;joykesten2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">7363</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;craigsrob&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">4079</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;adammcfarland&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">14717</span><span class="p">}</span>
<span class="p">]</span>


<span class="k">def</span> <span class="nf">add_students</span><span class="p">():</span> <span class="c1"># ADD a function</span>
    <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
        <span class="n">Student</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
                        <span class="n">points</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">])</span> 


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Student</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">add_students</span><span class="p">()</span> <span class="c1"># ADD</span>
</pre></div>
</td></tr></table>

<p>We can run the script once, but not twice because of the <code class="codehilite">unique=True</code> in the <code class="codehilite"><span class="kr">class</span> <span class="nx">Student</span><span class="p">(</span><span class="nx">Model</span><span class="p">)</span><span class="o">:</span></code>. We get an <code class="codehilite">IntegrityError</code> in the terminal. </p>
<p>We need to add a <code class="codehilite">try</code> block. Take two.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\students.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="n">students</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;kennethliff&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">4888</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;chalkers&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">11912</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;joykesten2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">7363</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;craigsrob&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">4079</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;adammcfarland&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">14717</span><span class="p">}</span>
<span class="p">]</span>


<span class="k">def</span> <span class="nf">add_students</span><span class="p">():</span> <span class="c1"># CHANGE the function</span>
    <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Student</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
                            <span class="n">points</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">])</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">student_record</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span>
            <span class="n">student_record</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">student</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">]</span>
            <span class="n">student_record</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Student</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">add_students</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>We get no result in the terminal: a good sign. We can run the script at will. We can check out the results in the database.</p>
<p>Add a function to select the top students, order them in descending order (from high to low), and retrieve them.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\students.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="n">students</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;kennethliff&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">4888</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;chalkers&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">11912</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;joykesten2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">7363</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;craigsrob&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">4079</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;adammcfarland&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">14717</span><span class="p">}</span>
<span class="p">]</span>


<span class="k">def</span> <span class="nf">add_students</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Student</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
                            <span class="n">points</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">])</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">student_record</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span>
            <span class="n">student_record</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">student</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">]</span>
            <span class="n">student_record</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">top_student</span><span class="p">():</span>
    <span class="n">student</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">Student</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="c1"># ADD</span>
    <span class="k">return</span> <span class="n">student</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Student</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">add_students</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Our top student right now is: {0.username}.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">top_student</span><span class="p">()))</span> <span class="c1"># ADD</span>
</pre></div>
</td></tr></table>

<p>This time, we should get a result in the terminal.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Our top student right now is: adammcfarland.
</pre></div>
</td></tr></table>

<p>Change the points in the dictionary and rerun the script.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\students.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="n">students</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;kennethliff&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">14718</span><span class="p">},</span> <span class="c1"># CHANGE, make it the top student</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;chalkers&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">11912</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;joykesten2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">7363</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;craigsrob&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">4079</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;adammcfarland&#39;</span><span class="p">,</span>
    <span class="s1">&#39;points&#39;</span><span class="p">:</span> <span class="mi">14717</span><span class="p">}</span>
<span class="p">]</span>


<span class="k">def</span> <span class="nf">add_students</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Student</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">],</span>
                            <span class="n">points</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">])</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">student_record</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">])</span>
            <span class="n">student_record</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">student</span><span class="p">[</span><span class="s1">&#39;points&#39;</span><span class="p">]</span>
            <span class="n">student_record</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">top_student</span><span class="p">():</span>
    <span class="n">student</span> <span class="o">=</span> <span class="n">Student</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">Student</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">student</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Student</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">add_students</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Our top student right now is: {0.username}.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">top_student</span><span class="p">()))</span>
</pre></div>
</td></tr></table>

<p>Results in the terminal.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Our top student right now is: kennethliff.
</pre></div>
</td></tr></table>

<p><strong>Recap:</strong></p>
<ul>
<li><code class="codehilite"><span class="na">.create</span><span class="p">()</span></code>, add a new record to the table.</li>
<li><code class="codehilite"><span class="na">.select</span><span class="p">()</span></code>, pick rows out of the table.</li>
<li><code class="codehilite"><span class="na">.get</span><span class="p">()</span></code>, fetch a single record from a table.</li>
</ul>
<h3 id="a-diary-app-a-case">A diary app &ndash; A Case<a class="headerlink" href="#a-diary-app-a-case" title="Permanent link">&para;</a></h3>
<h4 id="a-diary-app-the-skeleton-empty-classes-and-functions">A diary app &ndash; The skeleton (empty classes and functions)<a class="headerlink" href="#a-diary-app-the-skeleton-empty-classes-and-functions" title="Permanent link">&para;</a></h4>
<p>Now, let&rsquo;s build a diary application using an SQLite database. Such an application can be integrated into a web framework (like Flask) or frozen as an executive file (embedding SQLite). </p>
<p>We want to be able to load data and retrieve them. </p>
<p>The more general use could be a log book: we can write stuff and retrieve it. We can classify the entries and search for a specific word.</p>
<p>We start with a skeleton, bare functions and docstrings.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\diary.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="c1"># content</span>
    <span class="c1"># timestamp</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="k">def</span> <span class="nf">menu_loop</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Show the menu.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Add an entry.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">view_entries</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;View previous entries.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete an entry.&quot;&quot;&quot;</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> <span class="c1"># for running the script directly, not import it</span>
    <span class="n">menu_loop</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<h4 id="a-diary-app-initialize">A diary app &ndash; Initialize<a class="headerlink" href="#a-diary-app-initialize" title="Permanent link">&para;</a></h4>
<p>Let&rsquo;s add some flesh to the skeleton. Add the the <code class="codehilite">datetime</code> library and a new function to initialize the diary.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span> <span class="c1"># ADD</span>
<span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\diary.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span> <span class="c1"># CHANGE</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span> <span class="c1"># content: TextField ia more flexible, holds any type of data; contrary to CharField, a varchar with a maximum length</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span> <span class="c1"># timestamp; now does take parentheses</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="k">def</span> <span class="nf">initialize</span><span class="p">():</span> <span class="c1"># ADD</span>
    <span class="sd">&quot;&quot;&quot;Create the database and the table if they don&#39;t exist.&quot;&quot;&quot;</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Entry</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">menu_loop</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Show the menu.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Add an entry.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">view_entries</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;View previous entries.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete an entry.&quot;&quot;&quot;</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span> <span class="c1"># for running the script directly, not import it</span>
    <span class="n">initialize</span><span class="p">()</span> <span class="c1"># INSERT</span>
    <span class="n">menu_loop</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>We get no result in the terminal: a good sign. We can check out the results in the db.</p>
<h4 id="a-diary-app-create-a-menu">A diary app &ndash; Create a menu<a class="headerlink" href="#a-diary-app-create-a-menu" title="Permanent link">&para;</a></h4>
<p>We add a menu using a dictionary (we need the <code class="codehilite">OrderedDict</code> library).</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span> <span class="c1"># ADD</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\diary.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="k">def</span> <span class="nf">initialize</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Create the database and the table if they don&#39;t exist.&quot;&quot;&quot;</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Entry</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">menu_loop</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Show the menu.&quot;&quot;&quot;</span>
    <span class="n">choice</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># new variable with a default value</span>

    <span class="k">while</span> <span class="n">choice</span> <span class="o">!=</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span> <span class="c1"># ADD</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter &#39;q&#39; to quit.&quot;</span><span class="p">)</span> <span class="c1"># starting message</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">menu</span><span class="o">.</span><span class="n">items</span><span class="p">():</span> <span class="c1"># loop through the dictionary</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}) {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span> <span class="c1"># value from the menu variables furthur down in the script; __doc__ is the docstrings</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Action: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="c1"># lowercase, remove white spaces</span>

        <span class="k">if</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">menu</span><span class="p">:</span> <span class="c1"># check if the selection is in the menu</span>
            <span class="n">menu</span><span class="p">[</span><span class="n">choice</span><span class="p">]()</span> <span class="c1"># execute the choice</span>

<span class="k">def</span> <span class="nf">add_entry</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Add an entry.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">view_entries</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;View previous entries.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete an entry.&quot;&quot;&quot;</span>


<span class="n">menu</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span> <span class="c1"># ADD tuple</span>
    <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">add_entry</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">view_entries</span><span class="p">),</span>
<span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">initialize</span><span class="p">()</span>
    <span class="n">menu_loop</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>This is coded in Python 2. In Python 3, we would replace <code class="codehilite">raw_input</code> by <code class="codehilite">input</code>.</p>
<p>The result is dynamic. We can input data in the terminal and the script continues to run until we quit with <code class="codehilite">q</code>. We cannot do much since the functions are still empty (<code class="codehilite">def add_entry():</code> and <code class="codehilite">def view_entries():</code>). The following is a snapshot.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Enter &#39;q&#39; to quit.
a) Add an entry.
v) View previous entries.
Actions:
</pre></div>
</td></tr></table>

<h4 id="a-diary-app-data-entry">A diary app &ndash; Data entry<a class="headerlink" href="#a-diary-app-data-entry" title="Permanent link">&para;</a></h4>
<p>Add the <code class="codehilite">sys</code> library. We want to enter data and load the database.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">sys</span> <span class="c1"># ADD</span>
<span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\diary.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="k">def</span> <span class="nf">initialize</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Create the database and the table if they don&#39;t exist.&quot;&quot;&quot;</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Entry</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">menu_loop</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Show the menu.&quot;&quot;&quot;</span>
    <span class="n">choice</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">while</span> <span class="n">choice</span> <span class="o">!=</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter &#39;q&#39; to quit.&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">menu</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}) {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Action: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">menu</span><span class="p">:</span>
            <span class="n">menu</span><span class="p">[</span><span class="n">choice</span><span class="p">]()</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">():</span> <span class="c1"># IMPROVE</span>
    <span class="sd">&quot;&quot;&quot;Add an entry.&quot;&quot;&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter your entry. Press ctrl+z when finished.&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Save entry? [Yn] &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;n&#39;</span><span class="p">:</span>
            <span class="n">Entry</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Saved successfully!&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">view_entries</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;View previous entries.&quot;&quot;&quot;</span>


<span class="k">def</span> <span class="nf">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete an entry.&quot;&quot;&quot;</span>


<span class="n">menu</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">add_entry</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">view_entries</span><span class="p">),</span>
<span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">initialize</span><span class="p">()</span>
    <span class="n">menu_loop</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>The result is dynamic.</p>
<p>To the question <code class="codehilite">Enter your entry. Press ctrl+d when finished.</code>, write <code class="codehilite">Working with databases. I enjoy my day.</code>. Press enter, then press ctrl+z, then enter in Windows, ctrl+d in UNIX-based OS (for End-of-File key sequence). Save it (with a <code class="codehilite">y</code> input). Repeat. This time, do not save it (<code class="codehilite">n</code>). Check out the results in the database.</p>
<p><code class="codehilite">raw_input</code> in Python 2 vs. <code class="codehilite">input</code> in Python 3. In Python 2, we can print with <code class="codehilite">print &quot; &quot;</code> or <code class="codehilite">print(&quot; &quot;)</code>. The later is only possible in Python 3.</p>
<h4 id="a-diary-app-search-and-view-entries">A diary app &ndash; Search and view entries<a class="headerlink" href="#a-diary-app-search-and-view-entries" title="Permanent link">&para;</a></h4>
<p>We now want to read the data (query the database). We also want to search throught the entries. In SQL, we would code: <code class="codehilite">SELECT * FROM entry WHERE content LIKE &#39;%search_query$&#39; ORDER BY timestamp DESC;</code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\diary.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="k">def</span> <span class="nf">initialize</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Create the database and the table if they don&#39;t exist.&quot;&quot;&quot;</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Entry</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">menu_loop</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Show the menu.&quot;&quot;&quot;</span>
    <span class="n">choice</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">while</span> <span class="n">choice</span> <span class="o">!=</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter &#39;q&#39; to quit.&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">menu</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}) {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Action: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">menu</span><span class="p">:</span>
            <span class="n">menu</span><span class="p">[</span><span class="n">choice</span><span class="p">]()</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Add an entry.&quot;&quot;&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter your entry. Press ctrl+z when finished.&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Save entry? [Yn] &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;n&#39;</span><span class="p">:</span>
            <span class="n">Entry</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Saved successfully!&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">view_entries</span><span class="p">(</span><span class="n">search_query</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="c1"># IMPROVE</span>
    <span class="sd">&quot;&quot;&quot;View previous entries.&quot;&quot;&quot;</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="n">Entry</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">Entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span> <span class="c1"># sort them</span>
    <span class="k">if</span> <span class="n">search_query</span><span class="p">:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="n">entries</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Entry</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%A %B </span><span class="si">%d</span><span class="s1">, %Y %I:%M%p&#39;</span><span class="p">)</span> <span class="c1"># day name, month, date, year, hour (12h), minute, am/pm</span>
        <span class="k">print</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">timestamp</span><span class="p">))</span> <span class="c1"># print the number of characters in the timestamp</span>
        <span class="k">print</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;n) next entry&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;q) return to main menu&#39;</span><span class="p">)</span>

        <span class="n">next_action</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Action: [Nq] &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">next_action</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
            <span class="k">break</span>


<span class="k">def</span> <span class="nf">search_entries</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Search entries for a string.&quot;&quot;&quot;</span>
    <span class="n">view_entries</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete an entry.&quot;&quot;&quot;</span>


<span class="n">menu</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">add_entry</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">view_entries</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">search_entries</span><span class="p">),</span> <span class="c1"># ADD</span>
<span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">initialize</span><span class="p">()</span>
    <span class="n">menu_loop</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>The result is dynamic. Try entering stuff, save it. Back to the menu, read the entry. We should get a date, a line of <code class="codehilite">=</code> and the entry. Quit and go back to the menu. Try search for a word. It should find a single word among all the entry and pull out the entry where the word appears.</p>
<h4 id="a-diary-app-delete-entries">A diary app &ndash; Delete entries<a class="headerlink" href="#a-diary-app-delete-entries" title="Permanent link">&para;</a></h4>
<p>Complete the last function: <code class="codehilite">def delete_entry(entry):</code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\diary.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="k">def</span> <span class="nf">initialize</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Create the database and the table if they don&#39;t exist.&quot;&quot;&quot;</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Entry</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">menu_loop</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Show the menu.&quot;&quot;&quot;</span>
    <span class="n">choice</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">while</span> <span class="n">choice</span> <span class="o">!=</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter &#39;q&#39; to quit.&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">menu</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}) {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Action: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">menu</span><span class="p">:</span>
            <span class="n">menu</span><span class="p">[</span><span class="n">choice</span><span class="p">]()</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Add an entry.&quot;&quot;&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter your entry. Press ctrl+z when finished.&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Save entry? [Yn] &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;n&#39;</span><span class="p">:</span>
            <span class="n">Entry</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Saved successfully!&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">view_entries</span><span class="p">(</span><span class="n">search_query</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;View previous entries.&quot;&quot;&quot;</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="n">Entry</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">Entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">search_query</span><span class="p">:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="n">entries</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Entry</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%A %B </span><span class="si">%d</span><span class="s1">, %Y %I:%M%p&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">timestamp</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;n) next entry&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;d) delete entry&#39;</span><span class="p">)</span> <span class="c1"># ADD</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;q) return to main menu&#39;</span><span class="p">)</span>

        <span class="n">next_action</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Action: [Ndq] &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">next_action</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">elif</span> <span class="n">next_action</span> <span class="o">==</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="c1"># ADD</span>
            <span class="n">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">search_entries</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Search entries for a string.&quot;&quot;&quot;</span>
    <span class="n">view_entries</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span> <span class="c1"># IMPROVE</span>
    <span class="sd">&quot;&quot;&quot;Delete an entry.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;Are you sure? [yN] &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">delete_instance</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Entry deleted!&quot;</span><span class="p">)</span>


<span class="n">menu</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">add_entry</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">view_entries</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">search_entries</span><span class="p">),</span>
<span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">initialize</span><span class="p">()</span>
    <span class="n">menu_loop</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p>The result is dynamic. Enter something. Save it. View it. Delete it (the last entry). Confirm it. Go back to the main menu. View the previous entries. The last entry was deleted and we see the previous entry.</p>
<h4 id="a-diary-app-finalize-and-polish-up">A diary app &ndash; Finalize and polish up<a class="headerlink" href="#a-diary-app-finalize-and-polish-up" title="Permanent link">&para;</a></h4>
<p>We can polish up the final result. We need to ventilate the onscreen printouts by cleaning the screen here and there. On Windows, we clear the screen with <code class="codehilite">cls</code>; on UNIX-based OS, with <code class="codehilite">clear</code>.</p>
<p>Here is the final product. It&rsquo;s not perfect, but it works.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">os</span> <span class="c1"># ADD</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">SqliteDatabase</span><span class="p">(</span><span class="s1">&#39;C:\sqlite\diary.db&#39;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Entry</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">()</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">database</span> <span class="o">=</span> <span class="n">db</span>


<span class="k">def</span> <span class="nf">initialize</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Create the database and the table if they don&#39;t exist.&quot;&quot;&quot;</span>
    <span class="n">db</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_tables</span><span class="p">([</span><span class="n">Entry</span><span class="p">],</span> <span class="n">safe</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">clear</span><span class="p">():</span> <span class="c1"># ADD</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;cls&#39;</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;nt&#39;</span> <span class="k">else</span> <span class="s1">&#39;clear&#39;</span><span class="p">)</span> <span class="c1"># ADD; cls for Windows, clear for Linux or Mac OS X</span>


<span class="k">def</span> <span class="nf">menu_loop</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Show the menu.&quot;&quot;&quot;</span>
    <span class="n">choice</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">while</span> <span class="n">choice</span> <span class="o">!=</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
        <span class="n">clear</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter &#39;q&#39; to quit.&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">menu</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;{}) {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">))</span>
        <span class="n">choice</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Action: &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">menu</span><span class="p">:</span>
            <span class="n">clear</span><span class="p">()</span>
            <span class="n">menu</span><span class="p">[</span><span class="n">choice</span><span class="p">]()</span>


<span class="k">def</span> <span class="nf">add_entry</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Add an entry.&quot;&quot;&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Enter your entry. Press ctrl+z when finished.&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Save entry? [Yn] &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;n&#39;</span><span class="p">:</span>
            <span class="n">Entry</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Saved successfully!&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">view_entries</span><span class="p">(</span><span class="n">search_query</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;View previous entries.&quot;&quot;&quot;</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="n">Entry</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">Entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">desc</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">search_query</span><span class="p">:</span>
        <span class="n">entries</span> <span class="o">=</span> <span class="n">entries</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Entry</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">search_query</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">timestamp</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%A %B </span><span class="si">%d</span><span class="s1">, %Y %I:%M%p&#39;</span><span class="p">)</span>
        <span class="n">clear</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="n">timestamp</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">timestamp</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">timestamp</span><span class="p">))</span> <span class="c1"># ADD</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;n) next entry&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;d) delete entry&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;q) return to main menu&#39;</span><span class="p">)</span>

        <span class="n">next_action</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Action: [Ndq] &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">next_action</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">elif</span> <span class="n">next_action</span> <span class="o">==</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span>
            <span class="n">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">search_entries</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Search entries for a string.&quot;&quot;&quot;</span>
    <span class="n">view_entries</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s1">&#39;Search query: &#39;</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">delete_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete an entry.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;Are you sure? [yN] &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">delete_instance</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Entry deleted!&quot;</span><span class="p">)</span>


<span class="n">menu</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">add_entry</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">view_entries</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">search_entries</span><span class="p">),</span>
<span class="p">])</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">initialize</span><span class="p">()</span>
    <span class="n">menu_loop</span><span class="p">()</span>
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Regex/" title="Regular Expressions (regex)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Regular Expressions (regex)
              </span>
            </div>
          </a>
        
        
          <a href="../Datetime/" title="Datetime" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Datetime
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            © Ugo Sparks
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-93008985-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>