



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A Python documentation website.">
      
      
        <link rel="canonical" href="https://ugoproto.github.io/ugo_py_doc/Importing Data into Python/">
      
      
        <meta name="author" content="Ugo Sparks">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.0">
    
    
      
        <title>Importing Data into Python - ugo_py_doc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.78aab2dc.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.6079476c.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="amber" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#numpy" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://ugoproto.github.io/ugo_py_doc/" title="ugo_py_doc" class="md-header-nav__button md-logo">
          
            <i class="md-icon">layers</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ugo_py_doc
              </span>
              <span class="md-header-nav__topic">
                Importing Data into Python
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/ugoproto/ugo_py_doc.git/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      ugo_py_doc
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon">layers</i>
      
    </span>
    ugo_py_doc
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/ugoproto/ugo_py_doc.git/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      ugo_py_doc
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Basics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Basics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Py_CS/" title="Python Cheat Sheets" class="md-nav__link">
      Python Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python_Preliminaries/" title="Python Preliminaries" class="md-nav__link">
      Python Preliminaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python_Nice_to_Have/" title="Python Nice to Have" class="md-nav__link">
      Python Nice to Have
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Freeze_the_Code/" title="Freeze the Code" class="md-nav__link">
      Freeze the Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Decorators/" title="Decorators" class="md-nav__link">
      Decorators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Write_Better_Python/" title="Write Better Python with PEP" class="md-nav__link">
      Write Better Python with PEP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Regex/" title="Regular Expressions (regex)" class="md-nav__link">
      Regular Expressions (regex)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Databases/" title="Databases" class="md-nav__link">
      Databases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Datetime/" title="Datetime" class="md-nav__link">
      Datetime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Gedit_Execute_Highlighted_Python_Code/" title="Gedit, Execute Highlighted Python Code" class="md-nav__link">
      Gedit, Execute Highlighted Python Code
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Scipy Stack
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Scipy Stack
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Scipy_CS/" title="Scipy Stack Cheat Sheets" class="md-nav__link">
      Scipy Stack Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../JN_CS/" title="Jupyter Notebook Cheat Sheets" class="md-nav__link">
      Jupyter Notebook Cheat Sheets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Scientific Python/" title="Scientific Python" class="md-nav__link">
      Scientific Python
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Importing Data into Python
      </label>
    
    <a href="./" title="Importing Data into Python" class="md-nav__link md-nav__link--active">
      Importing Data into Python
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#numpy" title="Numpy" class="md-nav__link">
    Numpy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pandas" title="Pandas" class="md-nav__link">
    Pandas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-from-other-files" title="Importing from Other Files" class="md-nav__link">
    Importing from Other Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-relational-databases" title="Working with Relational Databases" class="md-nav__link">
    Working with Relational Databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-flat-files-from-the-web-web-scraping" title="Importing Flat Files from the Web (Web Scraping)" class="md-nav__link">
    Importing Flat Files from the Web (Web Scraping)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-to-apis-and-jsons" title="Introduction to APIs and JSONs" class="md-nav__link">
    Introduction to APIs and JSONs
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python for Data Science/" title="Python for Data Science" class="md-nav__link">
      Python for Data Science
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Tidy_Data_in_Python/" title="Tidy Data in Python" class="md-nav__link">
      Tidy Data in Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Lists/" title="Lists" class="md-nav__link">
      Lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../IPython Notebook/" title="IPython Notebook, Collection" class="md-nav__link">
      IPython Notebook, Collection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python Numpy Arrays/" title="Python Numpy Arrays" class="md-nav__link">
      Python Numpy Arrays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Vectors and Arrays (Linear Algebra)/" title="Vectors and Arrays (Linear Algebra)" class="md-nav__link">
      Vectors and Arrays (Linear Algebra)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Matplotlib, Python Plotting/" title="Matplotlib, Python Plotting" class="md-nav__link">
      Matplotlib, Python Plotting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Viewing+3D+Volumetric+Data+With+Matplotlib/" title="Viewing 3D Volumetric Data with Matplotlib" class="md-nav__link">
      Viewing 3D Volumetric Data with Matplotlib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Seaborn, Python Statistical Data Visualization Library/" title="Seaborn, Python's Statistical Data Visualization Library" class="md-nav__link">
      Seaborn, Python's Statistical Data Visualization Library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Pandas+DataFrames/" title="Pandas DataFrames" class="md-nav__link">
      Pandas DataFrames
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Write Idiomatic Pandas Code/" title="Write Idiomatic Pandas Code" class="md-nav__link">
      Write Idiomatic Pandas Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Exploratory Data Analysis/" title="Exploratory Data Analysis (EDA)" class="md-nav__link">
      Exploratory Data Analysis (EDA)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Intro to data.world in Python/" title="Introduction to data.world in Python" class="md-nav__link">
      Introduction to data.world in Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python+And+Excel/" title="Python and Excel" class="md-nav__link">
      Python and Excel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Overview_of_scikit-learn/" title="Overview of scikit-learn" class="md-nav__link">
      Overview of scikit-learn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../k-NN_Linear_regression_Logit_Scaling_Centering_Noise/" title="k-NN, Linear regression, Logit, Scaling, Centering, Noise" class="md-nav__link">
      k-NN, Linear regression, Logit, Scaling, Centering, Noise
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Time_Series_Analysis/" title="Time Series Analysis" class="md-nav__link">
      Time Series Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Sentiment_Analysis_with_Twitter/" title="Sentiment Analysis with Twitter" class="md-nav__link">
      Sentiment Analysis with Twitter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../EDA_Machine_Learning_Feature_Engineering_and_Kaggle/" title="EDA, Machine Learning, Feature Engineering, and Kaggle" class="md-nav__link">
      EDA, Machine Learning, Feature Engineering, and Kaggle
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Courses
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Courses
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Apprenez a programmer en Python/" title="Apprenez à programmer en Python" class="md-nav__link">
      Apprenez à programmer en Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Codecademy Python/" title="Codecademy Python" class="md-nav__link">
      Codecademy Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Learn Python the Hard Way/" title="Learn Python the Hard Way" class="md-nav__link">
      Learn Python the Hard Way
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../LPTHW, Python Code Snippets/" title="LPTHW, Python Code Snippets" class="md-nav__link">
      LPTHW, Python Code Snippets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Introduction to Python/" title="Introduction to Python" class="md-nav__link">
      Introduction to Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Manuals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Manuals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Automate the Boring Stuff with Python/" title="Automate the Boring Stuff with Python" class="md-nav__link">
      Automate the Boring Stuff with Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Managing Your Biological Data with Python/" title="Managing Your Biological Data with Python" class="md-nav__link">
      Managing Your Biological Data with Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Python for Education/" title="Python for Education" class="md-nav__link">
      Python for Education
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#numpy" title="Numpy" class="md-nav__link">
    Numpy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pandas" title="Pandas" class="md-nav__link">
    Pandas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-from-other-files" title="Importing from Other Files" class="md-nav__link">
    Importing from Other Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-relational-databases" title="Working with Relational Databases" class="md-nav__link">
    Working with Relational Databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-flat-files-from-the-web-web-scraping" title="Importing Flat Files from the Web (Web Scraping)" class="md-nav__link">
    Importing Flat Files from the Web (Web Scraping)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction-to-apis-and-jsons" title="Introduction to APIs and JSONs" class="md-nav__link">
    Introduction to APIs and JSONs
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ugoproto/ugo_py_doc.git/edit/master/docs/Importing Data into Python.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Importing Data into Python</h1>
                
                <!--
---

[TOC]
-->

<hr />
<p><strong>Foreword</strong></p>
<p>Code snippets and excerpts from the courses. Python 3. From DataCamp.</p>
<hr />
<h3 id="importing-from-flat-files">Importing from Flat Files<a class="headerlink" href="#importing-from-flat-files" title="Permanent link">&para;</a></h3>
<ul>
<li>Load the script and run it.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># %load &quot;Importing Data in Python.py&quot;</span>
<span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;moby_dick.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="c1"># Print it</span>
<span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="c1"># Check whether file is closed</span>
<span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">closed</span><span class="p">)</span>

<span class="c1"># Close file</span>
<span class="nb">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Check whether file is closed</span>
<span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">closed</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>CHAPTER 1. Loomings.

Call me Ishmael. Some years ago--never mind how long precisely--having
little or no money in my purse, and nothing particular to interest me on
shore, I thought I would sail about a little and see the watery part of
the world. It is a way I have of driving off the spleen and regulating
the circulation. Whenever I find myself growing grim about the mouth;
whenever it is a damp, drizzly November in my soul; whenever I find
myself involuntarily pausing before coffin warehouses, and bringing up
the rear of every funeral I meet; and especially whenever my hypos get
such an upper hand of me, that it requires a strong moral principle to
prevent me from deliberately stepping into the street, and methodically
knocking people&#39;s hats off--then, I account it high time to get to sea
as soon as I can. This is my substitute for pistol and ball. With a
philosophical flourish Cato throws himself upon his sword; I quietly
take to the ship. There is nothing surprising in this. If they but knew
it, almost all men in their degree, some time or other, cherish very
nearly the same feelings towards the ocean with me.
False
True
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Read &amp; print the first 3 lines</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;moby_dick.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">())</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">())</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">())</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>CHAPTER 1. Loomings.

Call me Ishmael. Some years ago--never mind how long precisely--having

little or 
no money in my purse, and nothing particular to in
terest me on
</pre></div>
</td></tr></table>

<ul>
<li><code class="codehilite">this</code> is a special package about PEP 20.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">this</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">The</span> <span class="n">Zen</span> <span class="k">of</span> <span class="n">Python</span><span class="p">,</span> <span class="n">by</span> <span class="n">Tim</span> <span class="n">Peters</span>

<span class="n">Beautiful</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">ugly</span><span class="p">.</span>
<span class="n">Explicit</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">implicit</span><span class="p">.</span>
<span class="n">Simple</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">complex</span><span class="p">.</span>
<span class="n">Complex</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">complicated</span><span class="p">.</span>
<span class="n">Flat</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">nested</span><span class="p">.</span>
<span class="n">Sparse</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">dense</span><span class="p">.</span>
<span class="n">Readability</span> <span class="n">counts</span><span class="p">.</span>
<span class="n">Special</span> <span class="n">cases</span> <span class="n">aren</span><span class="c">&#39;t special enough to break the rules.</span>
<span class="n">Although</span> <span class="n">practicality</span> <span class="n">beats</span> <span class="n">purity</span><span class="p">.</span>
<span class="n">Errors</span> <span class="n">should</span> <span class="n">never</span> <span class="n">pass</span> <span class="n">silently</span><span class="p">.</span>
<span class="n">Unless</span> <span class="n">explicitly</span> <span class="n">silenced</span><span class="p">.</span>
<span class="ow">In</span> <span class="n">the</span> <span class="n">face</span> <span class="k">of</span> <span class="n">ambiguity</span><span class="p">,</span> <span class="n">refuse</span> <span class="n">the</span> <span class="n">temptation</span> <span class="k">to</span> <span class="n">guess</span><span class="p">.</span>
<span class="n">There</span> <span class="n">should</span> <span class="n">be</span> <span class="n">one</span><span class="o">--</span> <span class="ow">and</span> <span class="n">preferably</span> <span class="n">only</span> <span class="n">one</span> <span class="o">--</span><span class="n">obvious</span> <span class="n">way</span> <span class="k">to</span> <span class="k">do</span> <span class="n">it</span><span class="p">.</span>
<span class="n">Although</span> <span class="n">that</span> <span class="n">way</span> <span class="n">may</span> <span class="k">not</span> <span class="n">be</span> <span class="n">obvious</span> <span class="n">at</span> <span class="n">first</span> <span class="n">unless</span> <span class="n">you</span><span class="c">&#39;re Dutch.</span>
<span class="n">Now</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">than</span> <span class="n">never</span><span class="p">.</span>
<span class="n">Although</span> <span class="n">never</span> <span class="ow">is</span> <span class="n">often</span> <span class="n">better</span> <span class="n">than</span> <span class="o">*</span><span class="n">right</span><span class="o">*</span> <span class="n">now</span><span class="p">.</span>
<span class="k">If</span> <span class="n">the</span> <span class="n">implementation</span> <span class="ow">is</span> <span class="n">hard</span> <span class="k">to</span> <span class="n">explain</span><span class="p">,</span> <span class="n">it</span><span class="c">&#39;s a bad idea.</span>
<span class="k">If</span> <span class="n">the</span> <span class="n">implementation</span> <span class="ow">is</span> <span class="n">easy</span> <span class="k">to</span> <span class="n">explain</span><span class="p">,</span> <span class="n">it</span> <span class="n">may</span> <span class="n">be</span> <span class="n">a</span> <span class="n">good</span> <span class="n">idea</span><span class="p">.</span>
<span class="n">Namespaces</span> <span class="n">are</span> <span class="n">one</span> <span class="n">honking</span> <span class="n">great</span> <span class="n">idea</span> <span class="o">--</span> <span class="k">let</span><span class="c">&#39;s do more of those!</span>
</pre></div>
</td></tr></table>

<ul>
<li>BDFL: Benevolent Dictator For Life, a.k.a. Guido van Rossum, Python’s creator.</li>
</ul>
<h4 id="numpy">Numpy<a class="headerlink" href="#numpy" title="Permanent link">&para;</a></h4>
<ul>
<li>Numpy arrays are a standard for storing numerical data.</li>
<li>Arrays are essential to other packages such as the <code class="codehilite">scikit-learn</code>, for machine learning.</li>
<li>Import <code class="codehilite">numpy</code> and <code class="codehilite">matplotlib</code> (or invoke them with the <code class="codehilite"><span class="nf">%pylab</span></code> magic command).</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># or...</span>
<span class="o">%</span><span class="n">pylab</span> <span class="n">inline</span>

<span class="c1"># no need for preceeding functions (methods) with np. or plt.</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>Populating the interactive namespace from numpy and matplotlib
</pre></div>
</td></tr></table>

<ul>
<li>Import a csv file and assign the content to an array.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;digits.csv&#39;</span>

<span class="c1"># Load the file as an array called digits</span>
<span class="n">digits</span> <span class="o">=</span> <span class="n">loadtxt</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span>

<span class="c1"># Print the datatype of digits</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">digits</span><span class="p">))</span>

<span class="k">print</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span>

<span class="c1"># Select a row</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">digits</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">:]</span>
<span class="k">print</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>&lt;class &#39;numpy.ndarray&#39;&gt;
[[ 1.  0.  0.  0.  0.  0.]
 [ 0.  0.  0.  0.  0.  0.]
 [ 1.  0.  0.  0.  0.  0.]
 [ 2.  0.  0.  0.  0.  0.]
 [ 0.  0.  0.  0.  0.  0.]
 [ 5.  0.  0.  0.  0.  0.]]
[ 0.  0.  0.  0.]
</pre></div>
</td></tr></table>

<ul>
<li>Import a txt file. The <code class="codehilite">delimiter</code> can be <code class="codehilite">&#39;\t&#39;</code>, <code class="codehilite">&#39;,&#39;</code>, <code class="codehilite">&#39;;&#39;</code>, etc. </li>
<li>Skip the first 90 rows.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;digits_header.txt&#39;</span>

<span class="c1"># Load the data into array data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loadtxt</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="n">skiprows</span> <span class="o">=</span> <span class="mi">90</span><span class="p">)</span>

<span class="c1"># Print data</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">[[ 3.  0.]</span>
 <span class="k">[ 6.  0.]</span>
 <span class="k">[ 4.  0.]</span>
 <span class="k">[ 6.  0.]</span>
 <span class="k">[ 2.  0.]</span>
 <span class="k">[ 9.  0.]</span>
 <span class="k">[ 1.  0.]</span>
 <span class="k">[ 2.  0.]</span>
 <span class="k">[ 0.  0.]</span>
 <span class="k">[ 5.  0.]]</span>
</pre></div>
</td></tr></table>

<ul>
<li>Import a txt file, but only the last rows and first column.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">data2</span> <span class="o">=</span> <span class="n">loadtxt</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="n">skiprows</span> <span class="o">=</span> <span class="mi">90</span><span class="p">,</span> <span class="n">usecols</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Print data</span>
<span class="k">print</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[ 3.  6.  4.  6.  2.  9.  1.  2.  0.  5.]
</pre></div>
</td></tr></table>

<ul>
<li>Import a txt file as string.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;seaslug.txt&#39;</span>

<span class="c1"># Import file: data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">loadtxt</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">str</span><span class="p">)</span>

<span class="c1"># Print the first element of data</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[&#39;b&quot;b\&#39;Time\&#39;&quot;&#39; &#39;b&quot;b\&#39;Percent\&#39;&quot;&#39;]
</pre></div>
</td></tr></table>

<ul>
<li>Import a txt file as float numbers.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;seaslug2.txt&#39;</span>

<span class="c1"># Import data as floats and skip the first row: data_float</span>
<span class="n">data_float</span> <span class="o">=</span> <span class="n">loadtxt</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;   &#39;</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">,</span> <span class="n">skiprows</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># Print the 10th element of data_float</span>
<span class="k">print</span><span class="p">(</span><span class="n">data_float</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>

<span class="c1"># Plot a scatterplot of the data</span>
<span class="n">scatter</span><span class="p">(</span><span class="n">data_float</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">data_float</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;time (min.)&#39;</span><span class="p">)</span>
<span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;percentage of larvae&#39;</span><span class="p">)</span>

<span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[ 0.     0.357]
</pre></div>
</td></tr></table>

<p><img alt="png" src="../img/importing_data_into_python/output_18_1.png" /></p>
<ul>
<li>Import a csv file. Format the data.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">genfromtxt</span><span class="p">(</span><span class="s1">&#39;titanic.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span> <span class="c1"># A structred array</span>
<span class="n">shape</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>(891,)
</pre></div>
</td></tr></table>

<ul>
<li>Extract a row, a column.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># to get the ith row, merely execute data[i]</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[ (1, 0, 3, b&quot; b&#39;male&#39;&quot;, 22.0, 1, 0, b&quot; b&#39;A/5 21171&#39;&quot;, 7.25, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;S&#39;&quot;)
 (2, 1, 1, b&quot; b&#39;female&#39;&quot;, 38.0, 1, 0, b&quot; b&#39;PC 17599&#39;&quot;, 71.2833, b&quot; b&#39;C85&#39;&quot;, b&quot; b&#39;C&#39;&quot;)
 (3, 1, 3, b&quot; b&#39;female&#39;&quot;, 26.0, 0, 0, b&quot; b&#39;STON/O2. 3101282&#39;&quot;, 7.925, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;S&#39;&quot;)
 (4, 1, 1, b&quot; b&#39;female&#39;&quot;, 35.0, 1, 0, b&quot; b&#39;113803&#39;&quot;, 53.1, b&quot; b&#39;C123&#39;&quot;, b&quot; b&#39;S&#39;&quot;)
 (5, 0, 3, b&quot; b&#39;male&#39;&quot;, 35.0, 0, 0, b&quot; b&#39;373450&#39;&quot;, 8.05, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;S&#39;&quot;)
 (6, 0, 3, b&quot; b&#39;male&#39;&quot;, nan, 0, 0, b&quot; b&#39;330877&#39;&quot;, 8.4583, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;Q&#39;&quot;)
 (7, 0, 1, b&quot; b&#39;male&#39;&quot;, 54.0, 0, 0, b&quot; b&#39;17463&#39;&quot;, 51.8625, b&quot; b&#39;E46&#39;&quot;, b&quot; b&#39;S&#39;&quot;)
 (8, 0, 3, b&quot; b&#39;male&#39;&quot;, 2.0, 3, 1, b&quot; b&#39;349909&#39;&quot;, 21.075, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;S&#39;&quot;)
 (9, 1, 3, b&quot; b&#39;female&#39;&quot;, 27.0, 0, 2, b&quot; b&#39;347742&#39;&quot;, 11.1333, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;S&#39;&quot;)
 (10, 1, 2, b&quot; b&#39;female&#39;&quot;, 14.0, 1, 0, b&quot; b&#39;237736&#39;&quot;, 30.0708, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;C&#39;&quot;)]
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># to get the column with name &#39;Fare&#39;, execute data[&#39;Fare&#39;]</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Fare&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[  7.25    71.2833   7.925   53.1      8.05     8.4583  51.8625  21.075
  11.1333  30.0708]
</pre></div>
</td></tr></table>

<ul>
<li>Import a csv file. </li>
<li>Format the data.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># default dtype is None</span>
<span class="n">data2</span> <span class="o">=</span> <span class="n">recfromcsv</span><span class="p">(</span><span class="s1">&#39;titanic.csv&#39;</span><span class="p">,</span> <span class="n">delimiter</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">names</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">dtype</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Print out first three entries</span>
<span class="k">print</span><span class="p">(</span><span class="n">data2</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[ (1, 0, 3, b&quot; b&#39;male&#39;&quot;, 22.0, 1, 0, b&quot; b&#39;A/5 21171&#39;&quot;, 7.25, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;S&#39;&quot;)
 (2, 1, 1, b&quot; b&#39;female&#39;&quot;, 38.0, 1, 0, b&quot; b&#39;PC 17599&#39;&quot;, 71.2833, b&quot; b&#39;C85&#39;&quot;, b&quot; b&#39;C&#39;&quot;)
 (3, 1, 3, b&quot; b&#39;female&#39;&quot;, 26.0, 0, 0, b&quot; b&#39;STON/O2. 3101282&#39;&quot;, 7.925, b&quot; b&#39;&#39;&quot;, b&quot; b&#39;S&#39;&quot;)]
</pre></div>
</td></tr></table>

<h4 id="pandas">Pandas<a class="headerlink" href="#pandas" title="Permanent link">&para;</a></h4>
<ul>
<li>Two-dimensional labeled data structure(s) or  data frame (DataFrame).</li>
<li>Pythonic analog of R&rsquo;s dataframes.</li>
<li>Columns can be of potentially different types.</li>
<li>Excellent object for: <ul>
<li>Manipulate, slice, reshape, groupby, join, merge.</li>
<li>Perform statistics.</li>
<li>Work with time series data.</li>
<li>Exploratory data analysis.</li>
<li>Data wrangling.</li>
<li>Data preprocessing.</li>
<li>Building models.</li>
<li>Visualization.</li>
</ul>
</li>
<li>There exists standards and best practices to use Pandas.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import pandas</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</pre></div>
</td></tr></table>

<ul>
<li>Pandas is not part of <code class="codehilite"><span class="nf">%pylab</span></code>.</li>
<li>Import a file.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;titanic.csv&#39;</span>

<span class="c1"># Read the file into a DataFrame: df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>

<span class="c1"># View the head of the DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   Passengerid   Survived   Pclass         Sex    Age   SibSp   Parch  \
0            1          0        3     b&#39;male&#39;   22.0       1       0   
1            2          1        1   b&#39;female&#39;   38.0       1       0   
2            3          1        3   b&#39;female&#39;   26.0       0       0   
3            4          1        1   b&#39;female&#39;   35.0       1       0   
4            5          0        3     b&#39;male&#39;   35.0       0       0

                 Ticket     Fare     Cabin  Embarked  
0          b&#39;A/5 21171&#39;   7.2500       b&#39;&#39;      b&#39;S&#39;  
1           b&#39;PC 17599&#39;  71.2833    b&#39;C85&#39;      b&#39;C&#39;  
2   b&#39;STON/O2. 3101282&#39;   7.9250       b&#39;&#39;      b&#39;S&#39;  
3             b&#39;113803&#39;  53.1000   b&#39;C123&#39;      b&#39;S&#39;  
4             b&#39;373450&#39;   8.0500       b&#39;&#39;      b&#39;S&#39;
</pre></div>
</td></tr></table>

<ul>
<li>Import another file; no header and some rows.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;digits2.csv&#39;</span>

<span class="c1"># Read the first 5 rows of the file into a DataFrame: data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">nrows</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>

<span class="c1"># Print the datatype of data</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="c1"># Build a numpy array from the DataFrame: data_array</span>
<span class="n">data_array</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># Print the datatype of data_array to the shell</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data_array</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
&lt;class &#39;numpy.ndarray&#39;&gt;
</pre></div>
</td></tr></table>

<ul>
<li>Import another file; replace the missing data (NA).</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;titanic_corrupt.csv&#39;</span>

<span class="c1"># Assign filename: file</span>
<span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;titanic_corrupt.csv&#39;</span>

<span class="c1"># Import file: data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">,</span> <span class="n">comment</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="n">na_values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Nothing&#39;</span><span class="p">])</span>

<span class="c1"># Print the head of the DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   PassengerId  Survived  Pclass     Sex   Age  SibSp  Parch   \
0            1         0       3    male  22.0      1       0   
1            2         1       1  female  38.0      1       0   
2            3         1       3  female  26.0      0       0   
3            4         1       1  female  35.0      1       0   
4            5         0       3    male  35.0      0       0

             Ticket   Fare Cabin Embarked  
0         A/5 21171   7,25   NaN        S  
1          PC 17599    NaN   NaN      NaN  
2  STON/O2. 3101282  7,925   NaN        S  
3            113803   53,1  C123        S  
4            373450   8,05   NaN        S
</pre></div>
</td></tr></table>

<ul>
<li>Plot the <code class="codehilite">Age</code> variable in a histogram.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">data</span><span class="p">[[</span><span class="s1">&#39;Age&#39;</span><span class="p">]])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Age (years)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p><img alt="png" src="../img/importing_data_into_python/output_38_0.png" /></p>
<h3 id="importing-from-other-files">Importing from Other Files<a class="headerlink" href="#importing-from-other-files" title="Permanent link">&para;</a></h3>
<ul>
<li>With Pandas&hellip; and a bit of Numpy.</li>
<li>Excel spreadsheets.</li>
<li>MATLAB files.</li>
<li>SAS files.</li>
<li>Stata files.</li>
<li>HDF5 files (large datasets, scientific, legal, etc.).</li>
<li>Feather.</li>
<li>Julia.</li>
<li>Pickle files (binary).</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">wd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">wd</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[&#39;.ipynb_checkpoints&#39;,
 &#39;a_movie.json&#39;,
 &#39;cars.csv&#39;,
 &#39;count.svg&#39;,
 &#39;CYratioCyt.png&#39;,
 &#39;CYratioCyt.svg&#39;,
 &#39;digits.csv&#39;,
 &#39;digits2.csv&#39;,
 &#39;digits_header.txt&#39;,
 &#39;disa10.png&#39;,
 &#39;disa10.svg&#39;,
 &#39;economic.csv&#39;,
 &#39;economic2.xls&#39;,
 &#39;Importing Data into Python 3.ipynb&#39;,
 &#39;importing_python_ch1_pdf_slides.pdf&#39;,
 &#39;importing_python_ch2_pdf_slides.pdf&#39;,
 &#39;importing_python_ch3_pdf_slides.pdf&#39;,
 &#39;importing_python_ch4_pdf_slides.pdf&#39;,
 &#39;importing_python_ch5_pdf_slides.pdf&#39;,
 &#39;intermediate_python_ch1_slides.pdf&#39;,
 &#39;intermediate_python_ch2_slides.pdf&#39;,
 &#39;intermediate_python_ch3_slides.pdf&#39;,
 &#39;intermediate_python_ch4_slides.pdf&#39;,
 &#39;intermediate_python_ch5_slides.pdf&#39;,
 &#39;intro_python_ch1_slides.pdf&#39;,
 &#39;intro_python_ch2_slides.pdf&#39;,
 &#39;intro_python_ch3_slides.pdf&#39;,
 &#39;intro_python_ch4_slides.pdf&#39;,
 &#39;moby_dick.txt&#39;,
 &#39;new1.py&#39;,
 &#39;p.png&#39;,
 &#39;PRIO_bd3.0.xls&#39;,
 &#39;Python 3.ipynb&#39;,
 &#39;Python3.py&#39;,
 &#39;sales.sas7bdat&#39;,
 &#39;save.p&#39;,
 &#39;seaslug.txt&#39;,
 &#39;seaslug2.txt&#39;,
 &#39;strain.png&#39;,
 &#39;strain.svg&#39;,
 &#39;Thumbs.db&#39;,
 &#39;titanic.csv&#39;,
 &#39;titanic_corrupt.csv&#39;,
 &#39;tweets_figure.png&#39;,
 &#39;tweets_figure.svg&#39;,
 &#39;winequality-red.csv&#39;]
</pre></div>
</td></tr></table>

<p><strong>Pickled files</strong></p>
<ul>
<li>There are a number of datatypes that cannot be saved easily to flat files, such as lists and dictionaries. </li>
<li>If you want your files to be human readable, you may want to save them as text files in a clever manner (JSONs, which you will see in a later chapter, are appropriate for Python dictionaries).</li>
<li>If, however, you merely want to be able to import them into Python, you can serialize them. </li>
<li>All this means is converting the object into a sequence of bytes, or bytestream.</li>
<li>Import it.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">pickle</span>

<span class="c1"># Save a dictionary into a pickle file.</span>
<span class="n">fav</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Airline&#39;</span> <span class="p">:</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug&#39;</span> <span class="p">:</span> <span class="s1">&#39;85&#39;</span><span class="p">,</span> <span class="s1">&#39;June&#39;</span> <span class="p">:</span> <span class="s1">&#39;69.4&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar&#39;</span> <span class="p">:</span> <span class="s1">&#39;84.4&#39;</span><span class="p">}</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">fav</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;save.p&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">))</span>

<span class="c1"># save.p</span>

<span class="c1"># Open pickle file and load data: d</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;save.p&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>

<span class="c1"># Print d</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

<span class="c1"># Print datatype of d</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>{&#39;Aug&#39;: &#39;85&#39;, &#39;Airline&#39;: &#39;8&#39;, &#39;Mar&#39;: &#39;84.4&#39;, &#39;June&#39;: &#39;69.4&#39;}
&lt;class &#39;dict&#39;&gt;
</pre></div>
</td></tr></table>

<p><strong>Excel files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;PRIO_bd3.0.xls&#39;</span>

<span class="c1"># Load spreadsheet: xl</span>
<span class="n">xl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>

<span class="c1"># Print sheet names</span>
<span class="k">print</span><span class="p">(</span><span class="n">xl</span><span class="o">.</span><span class="n">sheet_names</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[&#39;bdonly&#39;]
</pre></div>
</td></tr></table>

<ul>
<li>Parse the sheets. </li>
<li>By name or by number (first, second, &hellip;).</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">df1</span> <span class="o">=</span> <span class="n">xl</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;bdonly&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">xl</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<ul>
<li>Options: parse the first sheet by index, skip the first row of data, then name the columns <code class="codehilite">Country</code> and <code class="codehilite">AAM due to War (2002)</code>.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">xl</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_cols</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">skiprows</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Country&#39;</span><span class="p">,</span> <span class="s1">&#39;AAM due to War (2002)&#39;</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<ul>
<li>Options: parse the second sheet, parse only the first column, skip the first row and rename the column <code class="codehilite">Country</code>.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">df2</span> <span class="o">=</span> <span class="n">xl</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">parse_cols</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">skiprows</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Country&#39;</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<ul>
<li>Print the head of the <code class="codehilite">DataFrame</code>.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="n">df1</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   id  year  bdeadlow  bdeadhig  bdeadbes  annualdata  source  bdversion  \
0   1  1946      1000      9999      1000           2       1          3   
1   1  1952       450      3000      -999           2       1          3   
2   1  1967        25       999        82           2       1          3   
3   2  1946        25       999      -999           0       0          3   
4   2  1947        25       999      -999           0       0          3

   location    sidea   ...    epend  ependdate ependprec  gwnoa gwnoa2nd  \
0   Bolivia  Bolivia   ...        1 1946-07-21     -99.0    145      NaN   
1   Bolivia  Bolivia   ...        1 1952-04-12     -99.0    145      NaN   
2   Bolivia  Bolivia   ...        1 1967-10-16     -99.0    145      NaN   
3  Cambodia   France   ...        0        NaT       NaN    220      NaN   
4  Cambodia   France   ...        0        NaT       NaN    220      NaN

   gwnob  gwnob2nd  gwnoloc region  version  
0    NaN       NaN      145      5   2009-4  
1    NaN       NaN      145      5   2009-4  
2    NaN       NaN      145      5   2009-4  
3    NaN       NaN      811      3   2009-4  
4    NaN       NaN      811      3   2009-4

[5 rows x 32 columns]
</pre></div>
</td></tr></table>

<ul>
<li>We process images since we cheat a little. </li>
<li>Many packages are not installed. </li>
<li>We are not be able to import some data. </li>
<li>Images will then present the final results.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="c1"># for the following pictures...</span>
</pre></div>
</td></tr></table>

<p><strong>SAS files</strong></p>
<ul>
<li>Advanced analytics</li>
<li>Multivariate analysis</li>
<li>Business intelligence</li>
<li>Data management</li>
<li>Predictive analytics</li>
<li>Standard for computational analysis</li>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import sas7bdat package</span>
<span class="kn">from</span> <span class="nn">sas7bdat</span> <span class="kn">import</span> <span class="n">SAS7BDAT</span>

<span class="c1"># Save file to a DataFrame: df_sas</span>
<span class="k">with</span> <span class="n">SAS7BDAT</span><span class="p">(</span><span class="s1">&#39;sales.sas7bdat&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
    <span class="n">df_sas</span> <span class="o">=</span> <span class="nb">file</span><span class="o">.</span><span class="n">to_data_frame</span><span class="p">()</span>

<span class="c1"># Print head of DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df_sas</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># Plot histogram of DataFrame features</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_sas</span><span class="p">[[</span><span class="s1">&#39;P&#39;</span><span class="p">]])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<ul>
<li>The data are adapted from the website of the undergraduate text book <a href="http://www.principlesofeconometrics.com/sas/">Principles of Economics</a> by Hill, Griffiths and Lim.</li>
<li>The chart would be:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;p.png&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="png" src="../img/importing_data_into_python/output_57_0.png" /></p>
<p><strong>Stata files</strong></p>
<ul>
<li>The data consist of disease extent for several diseases in various countries (more information can be <a href="http://www.cid.harvard.edu/ciddata/geog/readme_disarea.html">found</a>.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import pandas</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c1"># Load Stata file into a pandas DataFrame: df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s1">&#39;disarea.dta&#39;</span><span class="p">)</span>

<span class="c1"># Print the head of the DataFrame df</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  wbcode               country  disa1  disa2  disa3  disa4  disa5  disa6  \
0    AFG           Afghanistan   0.00   0.00   0.76   0.73    0.0   0.00   
1    AGO                Angola   0.32   0.02   0.56   0.00    0.0   0.00   
2    ALB               Albania   0.00   0.00   0.02   0.00    0.0   0.00   
3    ARE  United Arab Emirates   0.00   0.00   0.00   0.00    0.0   0.00   
4    ARG             Argentina   0.00   0.24   0.24   0.00    0.0   0.23

   disa7  disa8   ...    disa16  disa17  disa18  disa19  disa20  disa21  \
0   0.00    0.0   ...       0.0     0.0     0.0    0.00    0.00     0.0   
1   0.56    0.0   ...       0.0     0.4     0.0    0.61    0.00     0.0   
2   0.00    0.0   ...       0.0     0.0     0.0    0.00    0.00     0.0   
3   0.00    0.0   ...       0.0     0.0     0.0    0.00    0.00     0.0   
4   0.00    0.0   ...       0.0     0.0     0.0    0.00    0.05     0.0

   disa22  disa23  disa24  disa25  
0    0.00    0.02    0.00    0.00  
1    0.99    0.98    0.61    0.00  
2    0.00    0.00    0.00    0.16  
3    0.00    0.00    0.00    0.00  
4    0.00    0.01    0.00    0.11

[5 rows x 27 columns]
</pre></div>
</td></tr></table>

<ul>
<li>Plot histogram of one column of the <code class="codehilite">DataFrame</code>.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;disa10&#39;</span><span class="p">]])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Extent of disease&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of coutries&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<p><img alt="png" src="../img/importing_data_into_python/output_61_0.png" /></p>
<p><strong>HDF5 files</strong></p>
<ul>
<li>Standard for storing large quantities of numerical data.</li>
<li>Datasets can be hundreds of gigabytes or terabytes.</li>
<li>HDF5 can scale to exabytes.</li>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import packages</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">h5py</span>

<span class="c1"># Assign filename: file</span>
<span class="nb">file</span> <span class="o">=</span> <span class="s1">&#39;LIGO_data.hdf5&#39;</span> 

<span class="c1"># Load file: data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="c1"># Print the datatype of the loaded file</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="c1"># Print the keys of the file</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="c1"># Get the HDF5 group: group</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;strain&#39;</span><span class="p">]</span>

<span class="c1"># Check out keys of group</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">group</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="c1"># Set variable equal to time series data: strain</span>
<span class="n">strain</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;strain&#39;</span><span class="p">][</span><span class="s1">&#39;Strain&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>

<span class="c1"># Set number of time points to sample: num_samples</span>
<span class="n">num_samples</span> <span class="o">=</span> <span class="mi">10000</span>

<span class="c1"># Set time vector</span>
<span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="n">num_samples</span><span class="p">)</span>

<span class="c1"># Plot data</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">strain</span><span class="p">[:</span><span class="n">num_samples</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;GPS Time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;strain&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<ul>
<li>You can find the LIGO data plus loads of <a href="https://losc.ligo.org/events/GW150914/">documentation</a> and <a href="https://losc.ligo.org/s/events/GW150914/GW150914_tutorial.html">tutorials</a> on Signal Processing with the data.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;strain.png&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="png" src="../img/importing_data_into_python/output_63_0.png" /></p>
<p><strong>MATLAB</strong></p>
<ul>
<li>“Matrix Laboratory”.</li>
<li>Industry standard in engineering and science.</li>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import package</span>
<span class="kn">import</span> <span class="nn">scipy.io</span>

<span class="c1"># Load MATLAB file: mat</span>
<span class="n">mat</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">loadmat</span><span class="p">(</span><span class="s1">&#39;albeck_gene_expression.mat&#39;</span><span class="p">)</span>

<span class="c1"># Print the datatype type of mat</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>

<span class="c1"># Print the keys of the MATLAB dictionary</span>
<span class="k">print</span><span class="p">(</span><span class="n">mat</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="c1"># Print the type of the value corresponding to the key &#39;CYratioCyt&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="s1">&#39;CYratioCyt&#39;</span><span class="p">]))</span>

<span class="c1"># Print the shape of the value corresponding to the key &#39;CYratioCyt&#39;</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="s1">&#39;CYratioCyt&#39;</span><span class="p">]))</span>

<span class="c1"># Subset the array and plot it</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="s1">&#39;CYratioCyt&#39;</span><span class="p">][</span><span class="mi">25</span><span class="p">,</span> <span class="mi">5</span><span class="p">:]</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;time (min.)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;normalized fluorescence (measure of expression)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<ul>
<li>This file contains gene expression data from the <a href="https://www.mcb.ucdavis.edu/faculty-labs/albeck/workshop.htm">Albeck Lab</a> at UC Davis. You can find the data and some great documentation.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;CYratioCyt.png&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="png" src="../img/importing_data_into_python/output_65_0.png" /></p>
<h3 id="working-with-relational-databases">Working with Relational Databases<a class="headerlink" href="#working-with-relational-databases" title="Permanent link">&para;</a></h3>
<p><strong>Relational Database Management System</strong></p>
<ul>
<li>PostgreSQL.</li>
<li>MySQL.</li>
<li>SQLite.</li>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import necessary module</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="c1"># Create engine: engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///Chinook.sqlite&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><code class="codehilite">&#39;sqlite:///Northwind.sqlite&#39;</code> is called the connection string to the SQLite database.</p>
<ul>
<li>The <a href="http://chinookdatabase.codeplex.com/">Chinook database</a> contains information about a semi-fictional digital media store in which media data is real and customer, employee and sales data has been manually created.</li>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Save the table names to a list: table_names</span>
<span class="n">table_names</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">table_names</span><span class="p">()</span>

<span class="c1"># Print the table names to the shell</span>
<span class="k">print</span><span class="p">(</span><span class="n">table_names</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Query the DB</strong></p>
<ul>
<li>The final <code class="codehilite">;</code> is facultative.</li>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Create engine: engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///Chinook.sqlite&#39;</span><span class="p">)</span>

<span class="c1"># Open engine connection: con</span>
<span class="n">con</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="c1"># Perform query: rs</span>
<span class="n">rs</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Album&#39;</span><span class="p">)</span>

<span class="c1"># Save results of the query to DataFrame: df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>

<span class="c1"># Close connection</span>
<span class="n">con</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Print head of DataFrame df</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<p><strong>Customize queries</strong></p>
<ul>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Create engine: engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///Chinook.sqlite&#39;</span><span class="p">)</span> <span class="c1"># becomes facultative with many queries</span>

<span class="c1"># Open engine in context manager</span>
<span class="c1"># Perform query and save results to DataFrame: df</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT LastName, Title FROM Employee&#39;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">fetchmany</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="mi">3</span><span class="p">))</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="c1"># set the DataFrame&#39;s column names to the corresponding names of the table columns</span>

<span class="c1"># Print the length of the DataFrame df</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>

<span class="c1"># Print the head of the DataFrame df</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<ul>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Create engine: engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///Chinook.sqlite&#39;</span><span class="p">)</span> <span class="c1"># becomes facultative with many queries</span>

<span class="c1"># Open engine in context manager</span>
<span class="c1"># Perform query and save results to DataFrame: df</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM Employee WHERE EmployeeId &gt;= 6&quot;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="c1"># Print the head of the DataFrame df</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<ul>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Create engine: engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///Chinook.sqlite&#39;</span><span class="p">)</span>

<span class="c1"># Open engine in context manager</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Employee ORDER BY BirthDate&#39;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>

    <span class="c1"># Set the DataFrame&#39;s column names</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="c1"># Print head of DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<p><strong>Query the DB the Pandas way</strong></p>
<ul>
<li>Simpler code (instead of importing the package)!!!</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import packages</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c1"># Create engine: engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///Chinook.sqlite&#39;</span><span class="p">)</span>

<span class="c1"># Execute query and store records in DataFrame: df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM Album&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>

<span class="c1"># Print head of DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># Open engine in context manager</span>
<span class="c1"># Perform query and save results to DataFrame: df1</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM Album&quot;</span><span class="p">)</span>
    <span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
    <span class="n">df1</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="c1"># Confirm that both methods yield the same result: does df = df1 ?   </span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">df1</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<ul>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import packages</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c1"># Create engine: engine</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///Chinook.sqlite&#39;</span><span class="p">)</span>

<span class="c1"># Execute query and store records in DataFrame: df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM Employee WHERE EmployeeId &gt;= 6 ORDER BY BirthDate&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>

<span class="c1"># Print head of DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<p><strong><code class="codehilite">INNER JOIN</code></strong></p>
<ul>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///Chinook.sqlite&#39;</span><span class="p">)</span>

<span class="c1"># Open engine in context manager</span>
<span class="c1"># Perform query and save results to DataFrame: df</span>
<span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">con</span><span class="p">:</span>
    <span class="n">rs</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT Title, Name FROM Album INNER JOIN Artist on Album.ArtistID = Artist.ArtistID&quot;</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rs</span><span class="o">.</span><span class="n">fetchall</span><span class="p">())</span>
    <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="c1"># Print head of DataFrame df</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<ul>
<li>Alternative code:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT Title, Name FROM Album INNER JOIN Artist on Album.ArtistID = Artist.ArtistID&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>

<span class="c1"># Print head of DataFrame df</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<ul>
<li>Code (instead of importing the package):</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Execute query and store records in DataFrame: df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM PlaylistTrack INNER JOIN Track on PlaylistTrack.TrackId = Track.TrackId WHERE Milliseconds &lt; 250000&quot;</span><span class="p">,</span> <span class="n">engine</span><span class="p">)</span>

<span class="c1"># Print head of DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<h3 id="importing-flat-files-from-the-web-web-scraping">Importing Flat Files from the Web (Web Scraping)<a class="headerlink" href="#importing-flat-files-from-the-web-web-scraping" title="Permanent link">&para;</a></h3>
<ul>
<li>Import and locally save datasets from the web.</li>
<li>Load datasets into Pandas <code class="codehilite">DataFrame</code>.</li>
<li>Make HTTP requests (GET requests).</li>
<li>Scrape web data such as HTML.</li>
<li>Parse HTML into useful data (BeautifulSoup).</li>
<li>Use the urllib and requests packages.</li>
</ul>
<p><strong>Using the <code class="codehilite">urllib</code> package on csv files</strong></p>
<ul>
<li>Import the package.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlretrieve</span>

<span class="c1"># import pandas as pd</span>

<span class="c1"># Assign url of file: url</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/winequality-red.csv&#39;</span>

<span class="c1"># Save file locally</span>
<span class="n">urlretrieve</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s1">&#39;winequality-red.csv&#39;</span><span class="p">)</span>

<span class="c1"># Read file into a DataFrame and print its head</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;winequality-red.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   fixed acidity  volatile acidity  citric acid  residual sugar  chlorides  \
0            7.4              0.70         0.00             1.9      0.076   
1            7.8              0.88         0.00             2.6      0.098   
2            7.8              0.76         0.04             2.3      0.092   
3           11.2              0.28         0.56             1.9      0.075   
4            7.4              0.70         0.00             1.9      0.076

   free sulfur dioxide  total sulfur dioxide  density    pH  sulphates  \
0                 11.0                  34.0   0.9978  3.51       0.56   
1                 25.0                  67.0   0.9968  3.20       0.68   
2                 15.0                  54.0   0.9970  3.26       0.65   
3                 17.0                  60.0   0.9980  3.16       0.58   
4                 11.0                  34.0   0.9978  3.51       0.56

   alcohol  quality  
0      9.4        5  
1      9.8        5  
2      9.8        5  
3      9.8        6  
4      9.4        5
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># import matplotlib.pyplot as plt</span>
<span class="c1"># import pandas as pd</span>

<span class="c1"># Assign url of file: url</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/winequality-red.csv&#39;</span>

<span class="c1"># Read file into a DataFrame: df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="p">)</span>

<span class="c1"># Print the head of the DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="c1"># Plot first column of df</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;fixed acidity (g(tartaric acid)/dm$^3$)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   fixed acidity  volatile acidity  citric acid  residual sugar  chlorides  \
0            7.4              0.70         0.00             1.9      0.076   
1            7.8              0.88         0.00             2.6      0.098   
2            7.8              0.76         0.04             2.3      0.092   
3           11.2              0.28         0.56             1.9      0.075   
4            7.4              0.70         0.00             1.9      0.076

   free sulfur dioxide  total sulfur dioxide  density    pH  sulphates  \
0                 11.0                  34.0   0.9978  3.51       0.56   
1                 25.0                  67.0   0.9968  3.20       0.68   
2                 15.0                  54.0   0.9970  3.26       0.65   
3                 17.0                  60.0   0.9980  3.16       0.58   
4                 11.0                  34.0   0.9978  3.51       0.56

   alcohol  quality  
0      9.4        5  
1      9.8        5  
2      9.8        5  
3      9.8        6  
4      9.4        5
</pre></div>
</td></tr></table>

<p><img alt="png" src="../img/importing_data_into_python/output_73_1.png" /></p>
<p><strong>Using the <code class="codehilite">urllib</code> package on Excel files</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># import pandas as pd</span>

<span class="c1"># Assign url of file: url</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://s3.amazonaws.com/assets.datacamp.com/course/importing_data_into_r/latitude.xls&#39;</span>

<span class="c1"># Read in all sheets of Excel file: xl</span>
<span class="n">xl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sheetname</span> <span class="o">=</span> <span class="bp">None</span><span class="p">)</span>

<span class="c1"># Print the sheetnames (keys) to the shell !!!</span>
<span class="k">print</span><span class="p">(</span><span class="n">xl</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="c1"># Print the head of the first sheet (using its name, NOT its index)</span>
<span class="k">print</span><span class="p">(</span><span class="n">xl</span><span class="p">[</span><span class="s1">&#39;1700&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>dict_keys([&#39;1700&#39;, &#39;1900&#39;])
                 country       1700
0            Afghanistan  34.565000
1  Akrotiri and Dhekelia  34.616667
2                Albania  41.312000
3                Algeria  36.720000
4         American Samoa -14.307000
</pre></div>
</td></tr></table>

<p><strong>HTTP requests to import files from the web</strong></p>
<ul>
<li><code class="codehilite">requests</code> is one of the most downloaded Python packages.</li>
<li><code class="codehilite">requests</code> works with <code class="codehilite">urllib</code>.</li>
<li>Import the package.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span><span class="p">,</span> <span class="n">Request</span>

<span class="c1"># Specify the url</span>
<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://www.datacamp.com/teach/documentation&quot;</span>

<span class="c1"># This packages the request: request</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># Send the request and catches the response: response</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

<span class="c1"># Print the datatype of response</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>

<span class="c1"># Be polite and close the response!</span>
<span class="n">response</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>&lt;class &#39;http.client.HTTPResponse&#39;&gt;
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span><span class="p">,</span> <span class="n">Request</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://docs.datacamp.com/teach/&quot;</span>

<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>


<span class="c1"># Extract the response: html</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="c1"># Print the html</span>
<span class="k">print</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

<span class="c1"># Be polite and close the response!</span>
<span class="n">response</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">b</span><span class="err">&#39;</span><span class="o">&lt;!</span><span class="n">DOCTYPE</span> <span class="n">html</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;shortcut icon&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;images/favicon.ico&quot;</span> <span class="o">/&gt;</span><span class="err">\</span><span class="n">n</span><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">meta</span> <span class="n">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="n">content</span><span class="o">=</span><span class="s">&quot;IE=edge&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">meta</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="n">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Home</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">meta</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;description&quot;</span> <span class="n">content</span><span class="o">=</span><span class="s">&quot;All Documentation on Course Creation&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/teach/css/main.css&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;canonical&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/teach/&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;alternate&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;application/rss+xml&quot;</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;DataCamp Teach Documentation&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/teach/feed.xml&quot;</span> <span class="o">/&gt;</span><span class="err">\</span><span class="n">n</span><span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>    <span class="o">&lt;</span><span class="n">header</span> <span class="k">class</span><span class="o">=</span><span class="s">&quot;site-header&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s">&quot;wrapper&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>    <span class="o">&lt;</span><span class="n">a</span> <span class="k">class</span><span class="o">=</span><span class="s">&quot;site-title&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/teach/&quot;</span><span class="o">&gt;</span><span class="n">DataCamp</span> <span class="n">Teach</span> <span class="n">Documentation</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>  <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="o">&lt;/</span><span class="n">header</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span><span class="err">\</span><span class="n">n</span>    <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s">&quot;page-content&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span>      <span class="o">&lt;</span><span class="n">div</span> <span class="k">class</span><span class="o">=</span><span class="s">&quot;wrapper&quot;</span><span class="o">&gt;</span><span class="err">\</span><span class="n">n</span>        <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">The</span> <span class="n">Teach</span> <span class="n">Documentation</span> <span class="n">has</span> <span class="n">been</span> <span class="n">moved</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;https://www.datacamp.com/teach/documentation&quot;</span><span class="o">&gt;</span><span class="nl">https</span><span class="p">:</span><span class="c1">//www.datacamp.com/teach/documentation&lt;/a&gt;!&lt;/p&gt;\n\n&lt;!-- Everybody can teach on DataCamp. The resources on this website explain all the steps to build your own course on DataCamp\&#39;s interactive data science platform.\n\nInterested in partnering with DataCamp? Head over to the [Course Material](/teach/course-material.html) page to get an idea of the requirements to build your own interactive course together with DataCamp!\n\n## Table of Contents\n\n- [Course Material](/teach/course-material.html) - Content required to build a DataCamp course.\n- [Video Lectures](/teach/video-lectures.html) - Details on video recording and editing.\n- [DataCamp Teach](https://www.datacamp.com/teach) - Use the DataCamp Teach website to create DataCamp courses (preferred).\n- [datacamp R Package](https://github.com/datacamp/datacamp/wiki) - Use R Package to create DataCamp courses (legacy).\n- [Code DataCamp Exercises](/teach/code-datacamp-exercises.html)\n- [SCT Design (R)](https://github.com/datacamp/testwhat/wiki)\n- [SCT Design (Python)](https://github.com/datacamp/pythonwhat/wiki)\n- [Style Guide](/teach/style-guide.html) --&gt;\n\n\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    \n\n  &lt;/body&gt;\n\n&lt;/html&gt;\n&#39;</span>
</pre></div>
</td></tr></table>

<p><strong>Using <code class="codehilite">requests</code></strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://docs.datacamp.com/teach/&quot;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">text</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># Print part of the html (split the paragraphs) instead of all with  print(text)</span>
<span class="n">head</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">head</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">head</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">head</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">head</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;shortcut icon&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;images/favicon.ico&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;IE=edge&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1&quot;</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Home<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;description&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;All Documentation on Course Creation&quot;</span><span class="p">&gt;</span>

  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/teach/css/main.css&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;canonical&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/teach/&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;alternate&quot;</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;application/rss+xml&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;DataCamp Teach Documentation&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;/teach/feed.xml&quot;</span> <span class="p">/&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>Scraping the web</strong></p>
<ul>
<li>Scrape unstructured data.</li>
<li>Scrape structured data, parse it and extract the data from HTML using the BeautifulSoup package.</li>
<li>Import the packages.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.python.org/~guido/&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">html_doc</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># Create a BeautifulSoup object from the HTML: soup</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_doc</span><span class="p">,</span> <span class="s1">&#39;lxml&#39;</span><span class="p">)</span>

<span class="c1"># Prettify the BeautifulSoup object: pretty_soup</span>
<span class="n">pretty_soup</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span>

<span class="c1"># Print the response</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">pretty_soup</span><span class="p">))</span>

<span class="c1"># Print part of the html (split the text), not all with  print(pretty_soup)</span>
<span class="n">head</span> <span class="o">=</span> <span class="n">pretty_soup</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&lt;/h3&gt;&#39;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">head</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">&lt;class</span> <span class="err">&#39;str&#39;</span><span class="nt">&gt;</span>
<span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;title&gt;</span>
   Guido&#39;s Personal Home Page
  <span class="nt">&lt;/title&gt;</span>
 <span class="nt">&lt;/head&gt;</span>
 <span class="nt">&lt;body</span> <span class="na">bgcolor=</span><span class="s">&quot;#FFFFFF&quot;</span> <span class="na">text=</span><span class="s">&quot;#000000&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;pics.html&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">border=</span><span class="s">&quot;0&quot;</span> <span class="na">src=</span><span class="s">&quot;images/IMG_2192.jpg&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/a&gt;</span>
   Guido van Rossum - Personal Home Page
  <span class="nt">&lt;/h1&gt;</span>
  <span class="nt">&lt;p&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.washingtonpost.com/wp-srv/business/longterm/microsoft/stories/1998/raymond120398.htm&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;i&gt;</span>
     &quot;Gawky and proud of it.&quot;
    <span class="nt">&lt;/i&gt;</span>
   <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;h3&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://metalab.unc.edu/Dave/Dr-Fun/df200004/df20000406.jpg&quot;</span><span class="nt">&gt;</span>
    Who
I Am
   <span class="nt">&lt;/a&gt;</span>
</pre></div>
</td></tr></table>

<ul>
<li>Other operations with BeautifulSoup.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.python.org/~guido/&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">html_doc</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>


<span class="c1"># Create a BeautifulSoup object from the HTML: soup</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_doc</span><span class="p">,</span> <span class="s1">&#39;lxml&#39;</span><span class="p">)</span>

<span class="c1"># Get the title of Guido&#39;s webpage: guido_title</span>
<span class="n">guido_title</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">title</span> <span class="c1"># attribute</span>

<span class="c1"># Print the title of Guido&#39;s webpage to the shell</span>
<span class="k">print</span><span class="p">(</span><span class="n">guido_title</span><span class="p">)</span>

<span class="c1"># Get Guido&#39;s text: guido_text</span>
<span class="n">guido_text</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span> <span class="c1"># method</span>

<span class="c1"># Print Guido&#39;s text to the shell</span>
<span class="k">print</span><span class="p">(</span><span class="n">guido_text</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">&lt;</span><span class="s s-Atom">title</span><span class="o">&gt;</span><span class="nv">Guido</span><span class="s s-Atom">&#39;s Personal Home Page&lt;/title&gt;</span>

<span class="s s-Atom">Guido&#39;s</span> <span class="nv">Personal</span> <span class="nv">Home</span> <span class="nv">Page</span>

<span class="nv">Guido</span> <span class="s s-Atom">van</span> <span class="nv">Rossum</span> <span class="o">-</span> <span class="nv">Personal</span> <span class="nv">Home</span> <span class="nv">Page</span>
<span class="s2">&quot;Gawky and proud of it.&quot;</span>
<span class="nv">Who</span>
<span class="nv">I</span> <span class="nv">Am</span>
<span class="nv">I</span> <span class="s s-Atom">am</span> <span class="s s-Atom">the</span> <span class="s s-Atom">author</span> <span class="s s-Atom">of</span> <span class="s s-Atom">the</span> <span class="nv">Python</span>
<span class="s s-Atom">programming</span> <span class="s s-Atom">language</span><span class="p">.</span>  <span class="nv">See</span> <span class="s s-Atom">also</span> <span class="s s-Atom">my</span> <span class="s s-Atom">resume</span>
<span class="s s-Atom">and</span> <span class="s s-Atom">my</span> <span class="s s-Atom">publications</span> <span class="s s-Atom">list</span><span class="p">,</span> <span class="s s-Atom">a</span> <span class="s s-Atom">brief</span> <span class="s s-Atom">bio</span><span class="p">,</span> <span class="s s-Atom">assorted</span> <span class="s s-Atom">writings</span><span class="p">,</span> <span class="s s-Atom">presentations</span> <span class="s s-Atom">and</span> <span class="nf">interviews</span> <span class="p">(</span><span class="s s-Atom">all</span> <span class="s s-Atom">about</span> <span class="nv">Python</span><span class="p">),</span> <span class="s s-Atom">some</span>
<span class="s s-Atom">pictures</span> <span class="s s-Atom">of</span> <span class="s s-Atom">me</span><span class="p">,</span>
<span class="s s-Atom">my</span> <span class="s s-Atom">new</span> <span class="s s-Atom">blog</span><span class="p">,</span> <span class="s s-Atom">and</span>
<span class="s s-Atom">my</span> <span class="s s-Atom">old</span>
<span class="s s-Atom">blog</span> <span class="s s-Atom">on</span> <span class="nv">Artima</span><span class="p">.</span><span class="s s-Atom">com</span><span class="p">.</span>  <span class="nv">I</span> <span class="s s-Atom">am</span>
<span class="s s-Atom">@gvanrossum</span> <span class="s s-Atom">on</span> <span class="nv">Twitter</span><span class="p">.</span>  <span class="nv">I</span>
<span class="s s-Atom">also</span> <span class="s s-Atom">have</span>
<span class="s s-Atom">a</span> <span class="nv">G</span><span class="o">+</span>
<span class="s s-Atom">profile</span><span class="p">.</span>

<span class="nv">In</span> <span class="nv">January</span> <span class="mi">2013</span> <span class="nv">I</span> <span class="s s-Atom">joined</span>
<span class="nv">Dropbox</span><span class="p">.</span>  <span class="nv">I</span> <span class="s s-Atom">work</span> <span class="s s-Atom">on</span> <span class="s s-Atom">various</span> <span class="nv">Dropbox</span>
<span class="s s-Atom">products</span> <span class="s s-Atom">and</span> <span class="s s-Atom">have</span> <span class="mi">50</span><span class="c1">% for my Python work, no strings attached.</span>
<span class="nv">Previously</span><span class="p">,</span> <span class="nv">I</span> <span class="s s-Atom">have</span> <span class="s s-Atom">worked</span> <span class="s s-Atom">for</span> <span class="nv">Google</span><span class="p">,</span> <span class="nv">Elemental</span> <span class="nv">Security</span><span class="p">,</span> <span class="nv">Zope</span>
<span class="nv">Corporation</span><span class="p">,</span> <span class="nv">BeOpen</span><span class="p">.</span><span class="s s-Atom">com</span><span class="p">,</span> <span class="nv">CNRI</span><span class="p">,</span> <span class="nv">CWI</span><span class="p">,</span> <span class="s s-Atom">and</span> <span class="nv">SARA</span><span class="p">.</span>  <span class="p">(</span><span class="nv">See</span>
<span class="s s-Atom">my</span> <span class="s s-Atom">resume</span><span class="p">.)</span>  <span class="nv">I</span> <span class="s s-Atom">created</span> <span class="nv">Python</span> <span class="s s-Atom">while</span> <span class="s s-Atom">at</span> <span class="nv">CWI</span><span class="p">.</span>

<span class="nv">How</span> <span class="s s-Atom">to</span> <span class="nv">Reach</span> <span class="nv">Me</span>
<span class="nv">You</span> <span class="s s-Atom">can</span> <span class="s s-Atom">send</span> <span class="s s-Atom">email</span> <span class="s s-Atom">for</span> <span class="s s-Atom">me</span> <span class="s s-Atom">to</span> <span class="nf">guido</span> <span class="p">(</span><span class="s s-Atom">at</span><span class="p">)</span> <span class="s s-Atom">python</span><span class="p">.</span><span class="s s-Atom">org</span><span class="p">.</span>
<span class="nv">I</span> <span class="s s-Atom">read</span> <span class="s s-Atom">everything</span> <span class="s s-Atom">sent</span> <span class="s s-Atom">there</span><span class="p">,</span> <span class="s s-Atom">but</span> <span class="s s-Atom">if</span> <span class="s s-Atom">you</span> <span class="s s-Atom">ask</span>
<span class="s s-Atom">me</span> <span class="s s-Atom">a</span> <span class="s s-Atom">question</span> <span class="s s-Atom">about</span> <span class="s s-Atom">using</span> <span class="nv">Python</span><span class="p">,</span> <span class="s s-Atom">it&#39;s likely that I won&#39;t</span> <span class="s s-Atom">have</span> <span class="s s-Atom">time</span>
<span class="s s-Atom">to</span> <span class="s s-Atom">answer</span> <span class="s s-Atom">it</span><span class="p">,</span> <span class="s s-Atom">and</span> <span class="s s-Atom">will</span> <span class="s s-Atom">instead</span> <span class="s s-Atom">refer</span> <span class="s s-Atom">you</span> <span class="s s-Atom">to</span>
<span class="nf">help</span> <span class="p">(</span><span class="s s-Atom">at</span><span class="p">)</span> <span class="s s-Atom">python</span><span class="p">.</span><span class="s s-Atom">org</span><span class="p">,</span>
<span class="s s-Atom">comp</span><span class="p">.</span><span class="s s-Atom">lang</span><span class="p">.</span><span class="s s-Atom">python</span> <span class="s s-Atom">or</span>
<span class="nv">StackOverflow</span><span class="p">.</span>  <span class="nv">If</span> <span class="s s-Atom">you</span> <span class="s s-Atom">need</span> <span class="s s-Atom">to</span>
<span class="s s-Atom">talk</span> <span class="s s-Atom">to</span> <span class="s s-Atom">me</span> <span class="s s-Atom">on</span> <span class="s s-Atom">the</span> <span class="s s-Atom">phone</span> <span class="s s-Atom">or</span> <span class="s s-Atom">send</span> <span class="s s-Atom">me</span> <span class="s s-Atom">something</span> <span class="s s-Atom">by</span> <span class="s s-Atom">snail</span> <span class="s s-Atom">mail</span><span class="p">,</span> <span class="s s-Atom">send</span> <span class="s s-Atom">me</span> <span class="s s-Atom">an</span>
<span class="s s-Atom">email</span> <span class="s s-Atom">and</span> <span class="nv">I</span><span class="s s-Atom">&#39;ll gladly email you instructions on how to reach me.</span>

<span class="s s-Atom">My Name</span>
<span class="s s-Atom">My name often poses difficulties for Americans.</span>

<span class="s s-Atom">Pronunciation: in Dutch, the &quot;G&quot; in Guido is a hard G,</span>
<span class="s s-Atom">pronounced roughly like the &quot;ch&quot; in Scottish &quot;loch&quot;.  (Listen to the</span>
<span class="s s-Atom">sound clip.)  However, if you&#39;re</span>
<span class="nv">American</span><span class="p">,</span> <span class="s s-Atom">you</span> <span class="s s-Atom">may</span> <span class="s s-Atom">also</span> <span class="s s-Atom">pronounce</span> <span class="s s-Atom">it</span> <span class="s s-Atom">as</span> <span class="s s-Atom">the</span> <span class="nv">Italian</span> <span class="s2">&quot;Guido&quot;</span><span class="p">.</span>  <span class="nv">I</span><span class="s s-Atom">&#39;m not</span>
<span class="s s-Atom">too worried about the associations with mob assassins that some people</span>
<span class="s s-Atom">have. :-)</span>

<span class="s s-Atom">Spelling: my last name is two words, and I&#39;d</span> <span class="s s-Atom">like</span> <span class="s s-Atom">keep</span> <span class="s s-Atom">it</span>
<span class="s s-Atom">that</span> <span class="s s-Atom">way</span><span class="p">,</span> <span class="s s-Atom">the</span> <span class="s s-Atom">spelling</span> <span class="s s-Atom">on</span> <span class="s s-Atom">some</span> <span class="s s-Atom">of</span> <span class="s s-Atom">my</span> <span class="s s-Atom">credit</span> <span class="s s-Atom">cards</span> <span class="s s-Atom">notwithstanding</span><span class="p">.</span>
<span class="nv">Dutch</span> <span class="s s-Atom">spelling</span> <span class="s s-Atom">rules</span> <span class="s s-Atom">dictate</span> <span class="s s-Atom">that</span> <span class="s s-Atom">when</span> <span class="s s-Atom">used</span> <span class="s s-Atom">in</span> <span class="s s-Atom">combination</span> <span class="s s-Atom">with</span> <span class="s s-Atom">my</span>
<span class="s s-Atom">first</span> <span class="s s-Atom">name</span><span class="p">,</span> <span class="s2">&quot;van&quot;</span> <span class="o">is</span> <span class="o">not</span> <span class="nn">capitalized</span><span class="p">:</span> <span class="s2">&quot;Guido van Rossum&quot;</span><span class="p">.</span>  <span class="nv">But</span> <span class="s s-Atom">when</span> <span class="s s-Atom">my</span>
<span class="s s-Atom">last</span> <span class="s s-Atom">name</span> <span class="o">is</span> <span class="s s-Atom">used</span> <span class="s s-Atom">alone</span> <span class="s s-Atom">to</span> <span class="s s-Atom">refer</span> <span class="s s-Atom">to</span> <span class="s s-Atom">me</span><span class="p">,</span> <span class="s s-Atom">it</span> <span class="o">is</span> <span class="s s-Atom">capitalized</span><span class="p">,</span> <span class="s s-Atom">for</span>
<span class="nn">example</span><span class="p">:</span> <span class="s2">&quot;As usual, Van Rossum was right.&quot;</span>

<span class="nv">Alphabetization</span><span class="s s-Atom">:</span> <span class="s s-Atom">in</span> <span class="nv">America</span><span class="p">,</span> <span class="nv">I</span> <span class="s s-Atom">show</span> <span class="s s-Atom">up</span> <span class="s s-Atom">in</span> <span class="s s-Atom">the</span> <span class="s s-Atom">alphabet</span> <span class="s s-Atom">under</span>
<span class="s2">&quot;V&quot;</span><span class="p">.</span>  <span class="nv">But</span> <span class="s s-Atom">in</span> <span class="nv">Europe</span><span class="p">,</span> <span class="nv">I</span> <span class="s s-Atom">show</span> <span class="s s-Atom">up</span> <span class="s s-Atom">under</span> <span class="s2">&quot;R&quot;</span><span class="p">.</span>  <span class="nv">And</span> <span class="s s-Atom">some</span> <span class="s s-Atom">of</span> <span class="s s-Atom">my</span> <span class="s s-Atom">friends</span> <span class="s s-Atom">put</span>
<span class="s s-Atom">me</span> <span class="s s-Atom">under</span> <span class="s2">&quot;G&quot;</span> <span class="s s-Atom">in</span> <span class="s s-Atom">their</span> <span class="s s-Atom">address</span> <span class="s s-Atom">book</span><span class="p">...</span>

<span class="nv">More</span> <span class="nv">Hyperlinks</span>

<span class="nv">Here</span><span class="s s-Atom">&#39;s a collection of essays relating to Python</span>
<span class="s s-Atom">that I&#39;ve</span> <span class="s s-Atom">written</span><span class="p">,</span> <span class="s s-Atom">including</span> <span class="s s-Atom">the</span> <span class="s s-Atom">foreword</span> <span class="nv">I</span> <span class="s s-Atom">wrote</span> <span class="s s-Atom">for</span> <span class="nv">Mark</span> <span class="nv">Lutz</span><span class="s s-Atom">&#39; book</span>
<span class="s s-Atom">&quot;Programming Python&quot;.</span>
<span class="s s-Atom">I own the official </span>
<span class="s s-Atom">Python license.</span>

<span class="s s-Atom">The Audio File Formats FAQ</span>
<span class="s s-Atom">I was the original creator and maintainer of the Audio File Formats</span>
<span class="s s-Atom">FAQ.  It is now maintained by Chris Bagwell</span>
<span class="s s-Atom">at http://www.cnpbagwell.com/audio-faq.  And here is a link to</span>
<span class="s s-Atom">SOX, to which I contributed</span>
<span class="s s-Atom">some early code.</span>

<span class="s s-Atom">&quot;On the Internet, nobody knows you&#39;re</span>
<span class="s s-Atom">a</span> <span class="s s-Atom">dog</span><span class="p">.</span><span class="err">&quot;</span>
</pre></div>
</td></tr></table>

<ul>
<li>More.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.python.org/~guido/&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">html_doc</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># create a BeautifulSoup object from the HTML: soup</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_doc</span><span class="p">,</span> <span class="s1">&#39;lxml&#39;</span><span class="p">)</span>

<span class="c1"># Print the title of Guido&#39;s webpage</span>
<span class="k">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

<span class="c1"># Find all &#39;a&#39; tags (which define hyperlinks): a_tags</span>
<span class="n">a_tags</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="c1"># for &lt;a&gt;, hyperlinks</span>

<span class="c1"># Print the URLs to the shell</span>
<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">a_tags</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">&lt;title&gt;</span>Guido&#39;s Personal Home Page<span class="nt">&lt;/title&gt;</span>
pics.html
http://www.washingtonpost.com/wp-srv/business/longterm/microsoft/stories/1998/raymond120398.htm
http://metalab.unc.edu/Dave/Dr-Fun/df200004/df20000406.jpg
http://www.python.org
Resume.html
Publications.html
bio.html
http://legacy.python.org/doc/essays/
http://legacy.python.org/doc/essays/ppt/
interviews.html
pics.html
http://neopythonic.blogspot.com
http://www.artima.com/weblogs/index.jsp?blogger=12088
https://twitter.com/gvanrossum
https://plus.google.com/u/0/115212051037621986145/posts
http://www.dropbox.com
Resume.html
http://groups.google.com/groups?q=comp.lang.python
http://stackoverflow.com
guido.au
http://legacy.python.org/doc/essays/
images/license.jpg
http://www.cnpbagwell.com/audio-faq
http://sox.sourceforge.net/
images/internetdog.gif
</pre></div>
</td></tr></table>

<h3 id="introduction-to-apis-and-jsons">Introduction to APIs and JSONs<a class="headerlink" href="#introduction-to-apis-and-jsons" title="Permanent link">&para;</a></h3>
<ul>
<li>API or Application Programming Interface are protocols and routines providing access to websites and web apps like OMDb, Wikipedia, Uber, Uber Developers, BGG, ImDB, Facebook, Instagram, and Twitter.</li>
<li>Most of data coming from APIS are JSON files.</li>
</ul>
<p><strong>Import the <code class="codehilite">json</code> package</strong></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># Load JSON: json_data</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;a_movie.json&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">json_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">json_data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;Title&#39;</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;Year&#39;</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Print each key-value pair in json_data</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">json_data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="n">json_data</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>&lt;class &#39;dict&#39;&gt;
The Social Network
2010

Response:  True
Rated:  PG-13
Poster:  http://ia.media-imdb.com/images/M/MV5BMTM2ODk0NDAwMF5BMl5BanBnXkFtZTcwNTM1MDc2Mw@@._V1_SX300.jpg
imdbID:  tt1285016
Year:  2010
Awards:  Won 3 Oscars. Another 161 wins &amp; 162 nominations.
Metascore:  95
Language:  English, French
Country:  USA
Plot:  Harvard student Mark Zuckerberg creates the social networking site that would become known as Facebook, but is later sued by two brothers who claimed he stole their idea, and the co-founder who was later squeezed out of the business.
imdbRating:  7.7
Actors:  Jesse Eisenberg, Rooney Mara, Bryan Barter, Dustin Fitzsimons
Title:  The Social Network
imdbVotes:  478,258
Released:  01 Oct 2010
Runtime:  120 min
Genre:  Biography, Drama
Type:  movie
Director:  David Fincher
Writer:  Aaron Sorkin (screenplay), Ben Mezrich (book)
</pre></div>
</td></tr></table>

<p><strong>The <code class="codehilite">requests</code> package again</strong></p>
<ul>
<li>Pull some movie data down from the Open Movie Database (OMDB) using their API.</li>
<li>Pull it as text.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://www.omdbapi.com/?t=social+network&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Print the text of the response</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>&lt;class &#39;requests.models.Response&#39;&gt;

{&quot;Title&quot;:&quot;The Social Network&quot;,&quot;Year&quot;:&quot;2010&quot;,&quot;Rated&quot;:&quot;PG-13&quot;,&quot;Released&quot;:&quot;01 Oct 2010&quot;,&quot;Runtime&quot;:&quot;120 min&quot;,&quot;Genre&quot;:&quot;Biography, Drama&quot;,&quot;Director&quot;:&quot;David Fincher&quot;,&quot;Writer&quot;:&quot;Aaron Sorkin (screenplay), Ben Mezrich (book)&quot;,&quot;Actors&quot;:&quot;Jesse Eisenberg, Rooney Mara, Bryan Barter, Dustin Fitzsimons&quot;,&quot;Plot&quot;:&quot;Harvard student Mark Zuckerberg creates the social networking site that would become known as Facebook, but is later sued by two brothers who claimed he stole their idea, and the co-founder who was later squeezed out of the business.&quot;,&quot;Language&quot;:&quot;English, French&quot;,&quot;Country&quot;:&quot;USA&quot;,&quot;Awards&quot;:&quot;Won 3 Oscars. Another 161 wins &amp; 162 nominations.&quot;,&quot;Poster&quot;:&quot;http://ia.media-imdb.com/images/M/MV5BMTM2ODk0NDAwMF5BMl5BanBnXkFtZTcwNTM1MDc2Mw@@._V1_SX300.jpg&quot;,&quot;Metascore&quot;:&quot;95&quot;,&quot;imdbRating&quot;:&quot;7.7&quot;,&quot;imdbVotes&quot;:&quot;478,258&quot;,&quot;imdbID&quot;:&quot;tt1285016&quot;,&quot;Type&quot;:&quot;movie&quot;,&quot;Response&quot;:&quot;True&quot;}
</pre></div>
</td></tr></table>

<ul>
<li>Pull it as JSON or a dictionary.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://www.omdbapi.com/?t=social+network&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># Decode the JSON data into a dictionary: json_data</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">json_data</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Print each key-value pair in json_data</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">json_data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="n">json_data</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>&lt;class &#39;dict&#39;&gt;

Response:  True
Rated:  PG-13
Poster:  http://ia.media-imdb.com/images/M/MV5BMTM2ODk0NDAwMF5BMl5BanBnXkFtZTcwNTM1MDc2Mw@@._V1_SX300.jpg
imdbID:  tt1285016
Year:  2010
Metascore:  95
Language:  English, French
Country:  USA
Awards:  Won 3 Oscars. Another 161 wins &amp; 162 nominations.
Plot:  Harvard student Mark Zuckerberg creates the social networking site that would become known as Facebook, but is later sued by two brothers who claimed he stole their idea, and the co-founder who was later squeezed out of the business.
Director:  David Fincher
imdbRating:  7.7
Actors:  Jesse Eisenberg, Rooney Mara, Bryan Barter, Dustin Fitzsimons
imdbVotes:  478,258
Released:  01 Oct 2010
Runtime:  120 min
Genre:  Biography, Drama
Type:  movie
Title:  The Social Network
Writer:  Aaron Sorkin (screenplay), Ben Mezrich (book)
</pre></div>
</td></tr></table>

<ul>
<li>Search the Library of Congress.</li>
<li>Pull a dictionary of dictionaries.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://chroniclingamerica.loc.gov/search/titles/results/?terms=new%20york&amp;format=json&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># Decode the JSON data into a dictionary: json_data</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Select the first element in the list json_data[&#39;items&#39;]: nyc_loc</span>
<span class="c1"># dict of dict</span>
<span class="n">nyc_loc</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Print each key-value pair in nyc_loc</span>
<span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">nyc_loc</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span><span class="p">,</span> <span class="n">nyc_loc</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>county:  [&#39;New York&#39;]
place_of_publication:  New York
oclc:  12928956
subject:  [&#39;New York (N.Y.)--Newspapers.&#39;, &#39;New York (State)--New York.--fast--(OCoLC)fst01204333&#39;]
alt_title:  []
title:  The New York thrice-a-week world.
type:  title
edition:  New York and Pennsylvania ed.
id:  /lccn/sn85047837/
note:  [&#39;Democrat.&#39;, &#39;Description based on: Vol. 36, no. 3,670 (Oct. 4, 1895).&#39;, &#39;The words &quot;New York thrice-a-week&quot; appear in title ornament.&#39;]
place:  [&#39;New York--New York--New York&#39;]
essay:  []
start_year:  1890
end_year:  1999
publisher:  Press Pub. Co.
lccn:  sn85047837
holding_type:  [&#39;Unspecified&#39;]
state:  [&#39;New York&#39;]
city:  [&#39;New York&#39;]
language:  [&#39;English&#39;]
country:  New York
title_normal:  new york thrice-a-week world.
url:  http://chroniclingamerica.loc.gov/lccn/sn85047837.json
frequency:  Three times a week
</pre></div>
</td></tr></table>

<ul>
<li>The Wikipedia API.</li>
<li><a href="https://www.mediawiki.org/wiki/API:Main_page">Documentation</a>.</li>
<li>Dictionary of dictionary of dictionary.</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://en.wikipedia.org/w/api.php?action=query&amp;prop=extracts&amp;format=json&amp;exintro=&amp;titles=pizza&#39;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># Decode the JSON data into a dictionary: json_data</span>
<span class="n">json_data</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>

<span class="c1"># Print the Wikipedia page extract</span>
<span class="n">pizza_extract</span> <span class="o">=</span> <span class="n">json_data</span><span class="p">[</span><span class="s1">&#39;query&#39;</span><span class="p">][</span><span class="s1">&#39;pages&#39;</span><span class="p">][</span><span class="s1">&#39;24768&#39;</span><span class="p">][</span><span class="s1">&#39;extract&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">pizza_extract</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">&lt;p&gt;&lt;b&gt;</span>Pizza<span class="nt">&lt;/b&gt;</span> is a flatbread generally topped with tomato sauce and cheese and baked in an oven. It is commonly topped with a selection of meats, vegetables and condiments. The term was first recorded in the 10th century, in a Latin manuscript from Gaeta in Central Italy. The modern pizza was invented in Naples, Italy, and the dish and its variants have since become popular in many areas of the world.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>In 2009, upon Italy&#39;s request, Neapolitan pizza was safeguarded in the European Union as a Traditional Speciality Guaranteed dish. The Associazione Verace Pizza Napoletana (the True Neapolitan Pizza Association) is a non-profit organization founded in 1984 with headquarters in Naples. It promotes and protects the &quot;true Neapolitan pizza&quot;.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Pizza is sold fresh or frozen, either whole or in portions, and is a common fast food item in Europe and North America. Various types of ovens are used to cook them and many varieties exist. Several similar dishes are prepared from ingredients commonly used in pizza preparation, such as calzone and stromboli.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;&lt;/p&gt;</span>
</pre></div>
</td></tr></table>

<p><strong>The Twitter API and Authentification</strong></p>
<ul>
<li>Twitter has many APIs: the main API, the REST API, Streaming APIs (private, public), Firehouse (expensive), etc.</li>
<li><a href="https://dev.twitter.com/overview/api/tweets">Field Guide</a>.</li>
<li>Consult the documentation to set an authentification key (available online).</li>
</ul>
<p><strong><code class="codehilite">tweepy</code> package</strong></p>
<ul>
<li>The authentication looks like the following:</li>
<li>Code:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import package</span>
<span class="kn">import</span> <span class="nn">tweepy</span><span class="o">,</span> <span class="nn">json</span>

<span class="c1"># Store OAuth authentication credentials in relevant variables</span>
<span class="n">access_token</span> <span class="o">=</span> <span class="s2">&quot;---&quot;</span>
<span class="n">access_token_secret</span> <span class="o">=</span> <span class="s2">&quot;---&quot;</span>
<span class="n">consumer_key</span> <span class="o">=</span> <span class="s2">&quot;---&quot;</span>
<span class="n">consumer_secret</span> <span class="o">=</span> <span class="s2">&quot;---&quot;</span>

<span class="c1"># Pass OAuth details to tweepy&#39;s OAuth handler</span>
<span class="n">auth</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">OAuthHandler</span><span class="p">(</span><span class="n">consumer_key</span><span class="p">,</span> <span class="n">consumer_secret</span><span class="p">)</span>
<span class="n">auth</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">access_token</span><span class="p">,</span> <span class="n">access_token_secret</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Start streaming tweets</strong></p>
<ul>
<li>Code:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Initialize Stream listener</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">MyStreamListener</span><span class="p">()</span>

<span class="c1"># Create you Stream object with authentication</span>
<span class="n">stream</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>


<span class="c1"># Filter Twitter Streams to capture data by the keywords:</span>
<span class="n">stream</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">track</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;clinton&#39;</span><span class="p">,</span> <span class="s1">&#39;trump&#39;</span><span class="p">,</span> <span class="s1">&#39;sanders&#39;</span><span class="p">,</span> <span class="s1">&#39;cruz&#39;</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<ul>
<li>Code of <code class="codehilite">MyStreamListener()</code>:</li>
<li>Creates a file called tweets.txt, collects streaming tweets as .jsons and writes them to the file tweets.txt; once 100 tweets have been streamed, the listener closes the file and stops listening. </li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">MyStreamListener</span><span class="p">(</span><span class="n">tweepy</span><span class="o">.</span><span class="n">StreamListener</span><span class="p">):</span>


    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">MyStreamListener</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_tweets</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;tweets.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>

        <span class="n">tweet</span> <span class="o">=</span> <span class="n">status</span><span class="o">.</span><span class="n">_json</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="p">)</span>
        <span class="n">tweet_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">num_tweets</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">num_tweets</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><strong>Load and explore your Twitter data</strong></p>
<ul>
<li>Code:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import package</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># String of path to file: tweets_data_path</span>
<span class="n">tweets_data_path</span> <span class="o">=</span> <span class="s1">&#39;tweets.txt&#39;</span>

<span class="c1"># Initialize empty list to store tweets: tweets_data</span>
<span class="n">tweets_data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Open connection to file</span>
<span class="n">tweets_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">tweets_data_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>

<span class="c1"># Read in tweets and store in list: tweets_data</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">tweets_file</span><span class="p">:</span>
    <span class="n">tweet</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">tweets_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tweet</span><span class="p">)</span>

<span class="c1"># Close connection to file</span>
<span class="n">tweets_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Print the keys of the first tweet dict</span>
<span class="k">print</span><span class="p">(</span><span class="n">tweets_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<p><strong>Send the Twitter data to a <code class="codehilite">DataFrame</code></strong></p>
<ul>
<li>Twitter data in a list of dictionaries <code class="codehilite">tweets_data</code>, where each dictionary corresponds to a single tweet. </li>
<li>The text in a tweet <code class="codehilite">t1</code> is stored as the value <code class="codehilite">t1[&#39;text&#39;]</code>; similarly, the language is stored in <code class="codehilite">t1[&#39;lang&#39;]</code>. </li>
<li>Code:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import package</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c1"># Build DataFrame of tweet texts and languages</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">tweets_data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;lang&#39;</span><span class="p">])</span>

<span class="c1"># Print head of DataFrame</span>
<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</td></tr></table>

<p><strong>Analyze the tweets (NLP, regex)</strong></p>
<ul>
<li>A little bit of Twitter text analysis and plotting. </li>
<li>Use the statistical data visualization library <a href="https://stanford.edu/%7Emwaskom/software/seaborn/">seaborn</a>.</li>
<li>Code:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c1"># Import the regular expressions library</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="c1"># The function tells you whether the first argument (a word) occurs within the 2nd argument (a tweet)</span>
<span class="k">def</span> <span class="nf">word_in_text</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">tweet</span><span class="p">):</span>
    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">tweet</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">tweet</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>

<span class="c1"># Initialize list to store tweet counts</span>
<span class="p">[</span><span class="n">clinton</span><span class="p">,</span> <span class="n">trump</span><span class="p">,</span> <span class="n">sanders</span><span class="p">,</span> <span class="n">cruz</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1"># Iterate through df, counting the number of tweets in which</span>
<span class="c1"># each candidate is mentioned</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">clinton</span> <span class="o">+=</span> <span class="n">word_in_text</span><span class="p">(</span><span class="s1">&#39;clinton&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
    <span class="n">trump</span> <span class="o">+=</span> <span class="n">word_in_text</span><span class="p">(</span><span class="s1">&#39;trump&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
    <span class="n">sanders</span> <span class="o">+=</span> <span class="n">word_in_text</span><span class="p">(</span><span class="s1">&#39;sanders&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
    <span class="n">cruz</span> <span class="o">+=</span> <span class="n">word_in_text</span><span class="p">(</span><span class="s1">&#39;cruz&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>

<span class="c1"># Import packages</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>

<span class="c1"># Set seaborn style</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">color_codes</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Create a list of labels:cd</span>
<span class="n">cd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;clinton&#39;</span><span class="p">,</span> <span class="s1">&#39;trump&#39;</span><span class="p">,</span> <span class="s1">&#39;sanders&#39;</span><span class="p">,</span> <span class="s1">&#39;cruz&#39;</span><span class="p">]</span>

<span class="c1"># Plot histogram</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">cd</span><span class="p">,</span> <span class="p">[</span><span class="n">clinton</span><span class="p">,</span> <span class="n">trump</span><span class="p">,</span> <span class="n">sanders</span><span class="p">,</span> <span class="n">cruz</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="c1"># for the following pictures...</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Image</span><span class="p">(</span><span class="s1">&#39;tweets_figure.png&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p><img alt="png" src="../img/importing_data_into_python/output_99_0.png" /></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Scientific Python/" title="Scientific Python" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Scientific Python
              </span>
            </div>
          </a>
        
        
          <a href="../Python for Data Science/" title="Python for Data Science" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Python for Data Science
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            © Ugo Sparks
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.8eb9be28.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-93008985-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>