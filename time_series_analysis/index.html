
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python documentation website.">
      
      
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.0">
    
    
      
        <title>Time Series Analysis - ugo_py_doc</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8b42a75e.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#ffc105">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Ubuntu";--md-code-font-family:"Ubuntu Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="amber" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#approach" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="ugo_py_doc" class="md-header__button md-logo" aria-label="ugo_py_doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 16 7.36-5.73L21 9l-9-7-9 7 1.63 1.27M12 18.54l-7.38-5.73L3 14.07l9 7 9-7-1.63-1.27L12 18.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ugo_py_doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Time Series Analysis
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ugoproto/ugo_py_doc.git/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ugo_py_doc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="ugo_py_doc" class="md-nav__button md-logo" aria-label="ugo_py_doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 16 7.36-5.73L21 9l-9-7-9 7 1.63 1.27M12 18.54l-7.38-5.73L3 14.07l9 7 9-7-1.63-1.27L12 18.54z"/></svg>

    </a>
    ugo_py_doc
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ugoproto/ugo_py_doc.git/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ugo_py_doc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Basics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Basics" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Basics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../py_cs/" class="md-nav__link">
        Python Cheat Sheets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../databases/" class="md-nav__link">
        Databases
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../datetime/" class="md-nav__link">
        Datetime
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../decorators/" class="md-nav__link">
        Decorators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../freeze_the_code/" class="md-nav__link">
        Freeze the Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gedit_execute_highlighted_python_code/" class="md-nav__link">
        Gedit, Execute Highlighted Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_nice_to_have/" class="md-nav__link">
        Python Nice to Have
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Scipy Stack
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Scipy Stack" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Scipy Stack
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../jn_cs/" class="md-nav__link">
        Jupyter Notebook Cheat Sheets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scipy_cs/" class="md-nav__link">
        Scipy Stack Cheat Sheets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../eda_machine_learning_feature_engineering_and_kaggle/" class="md-nav__link">
        EDA, Machine Learning, Feature Engineering, and Kaggle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exploratory_data_analysis/" class="md-nav__link">
        Exploratory Data Analysis (EDA)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../feature_selection_in_python/" class="md-nav__link">
        Feature Selection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../geospatial_data_in_python/" class="md-nav__link">
        Geospatial Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../importing_data_into_python/" class="md-nav__link">
        Importing Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introduction_to_customer_segmentation_in_python/" class="md-nav__link">
        Introduction to Customer Segmentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intro_to_data_world_in_python/" class="md-nav__link">
        Introduction to data.world
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview_of_scikit_learn/" class="md-nav__link">
        Overview of scikit-learn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_and_excel/" class="md-nav__link">
        Python and Excel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scaling_centering_noise_with_knn_linear_regression_logit/" class="md-nav__link">
        Scaling, Centering, Noise with kNN, Linear Regression, Logit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sentiment_analysis_with_twitter/" class="md-nav__link">
        Sentiment Analysis with Twitter
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Time Series Analysis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Time Series Analysis
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#approach" class="md-nav__link">
    Approach
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-packages-and-the-data" class="md-nav__link">
    Importing Packages and the Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrangle-the-data" class="md-nav__link">
    Wrangle the Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exploratory-data-analysis-eda" class="md-nav__link">
    Exploratory Data Analysis (EDA)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trends-and-seasonality-in-time-series" class="md-nav__link">
    Trends and Seasonality in Time Series
  </a>
  
    <nav class="md-nav" aria-label="Trends and Seasonality in Time Series">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identifying-trends-in-time-series" class="md-nav__link">
    Identifying Trends in Time Series
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seasonal-patterns-in-time-series" class="md-nav__link">
    Seasonal Patterns in Time Series
  </a>
  
    <nav class="md-nav" aria-label="Seasonal Patterns in Time Series">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#first-order-differencing" class="md-nav__link">
    First-order differencing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#periodicity-and-autocorrelation" class="md-nav__link">
    Periodicity and Autocorrelation
  </a>
  
    <nav class="md-nav" aria-label="Periodicity and Autocorrelation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-word-about-correlation" class="md-nav__link">
    A Word about Correlation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#periodicity-and-autocorrelation-continued" class="md-nav__link">
    Periodicity and Autocorrelation (continued)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autocorrelation" class="md-nav__link">
    Autocorrelation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forecasts-arima" class="md-nav__link">
    Forecasts, ARIMA...
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vectors_and_arrays_linear_algebra/" class="md-nav__link">
        Vectors and Arrays (Linear Algebra)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../viewing_3d_volumetric_data_with_matplotlib/" class="md-nav__link">
        Viewing 3D Volumetric Data with Matplotlib
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../write_idiomatic_pandas_code/" class="md-nav__link">
        Write Idiomatic Pandas Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Courses
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Courses" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Courses
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../apprenez_a_programmer_en_python/" class="md-nav__link">
        Apprenez à programmer en Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../automate_the_boring_stuff_with_python/" class="md-nav__link">
        Automate the Boring Stuff with Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../codecademy_python/" class="md-nav__link">
        Codecademy Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../learn_python_the_hard_way/" class="md-nav__link">
        Learn Python the Hard Way
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lpthw_python_code_snippets/" class="md-nav__link">
        LPTHW, Python Code Snippets
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Manuals
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Manuals" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Manuals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../managing_your_biological_data_with_python/" class="md-nav__link">
        Managing Your Biological Data with Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../python_for_education/" class="md-nav__link">
        Python for Education
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#approach" class="md-nav__link">
    Approach
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#importing-packages-and-the-data" class="md-nav__link">
    Importing Packages and the Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrangle-the-data" class="md-nav__link">
    Wrangle the Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exploratory-data-analysis-eda" class="md-nav__link">
    Exploratory Data Analysis (EDA)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#trends-and-seasonality-in-time-series" class="md-nav__link">
    Trends and Seasonality in Time Series
  </a>
  
    <nav class="md-nav" aria-label="Trends and Seasonality in Time Series">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identifying-trends-in-time-series" class="md-nav__link">
    Identifying Trends in Time Series
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#seasonal-patterns-in-time-series" class="md-nav__link">
    Seasonal Patterns in Time Series
  </a>
  
    <nav class="md-nav" aria-label="Seasonal Patterns in Time Series">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#first-order-differencing" class="md-nav__link">
    First-order differencing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#periodicity-and-autocorrelation" class="md-nav__link">
    Periodicity and Autocorrelation
  </a>
  
    <nav class="md-nav" aria-label="Periodicity and Autocorrelation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-word-about-correlation" class="md-nav__link">
    A Word about Correlation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#periodicity-and-autocorrelation-continued" class="md-nav__link">
    Periodicity and Autocorrelation (continued)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autocorrelation" class="md-nav__link">
    Autocorrelation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forecasts-arima" class="md-nav__link">
    Forecasts, ARIMA...
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ugoproto/ugo_py_doc.git/edit/master/docs/time_series_analysis.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Time Series Analysis</h1>
                
                <p><strong>Foreword</strong></p>
<p>Code snippets and excerpts from the tutorial. Python 3. From DataCamp.</p>
<hr />
<h2 id="approach">Approach<a class="headerlink" href="#approach" title="Permanent link">&para;</a></h2>
<p>Get Google Trends data of keywords such as &lsquo;diet&rsquo; and &lsquo;gym&rsquo; and see how they vary over time while learning about trends and seasonality in time series data.</p>
<ul>
<li>Source the data</li>
<li>Wrangle the data</li>
<li>Exploratory Data Analysis</li>
<li>Trends and seasonality in time series data<ul>
<li>Identifying Trends</li>
<li>Seasonal patterns<ul>
<li>First Order Differencing</li>
<li>Periodicity and Autocorrelation</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="importing-packages-and-the-data">Importing Packages and the Data<a class="headerlink" href="#importing-packages-and-the-data" title="Permanent link">&para;</a></h2>
<p>The data are from <a href="https://trends.google.com/trends/explore?date=all&amp;q=diet,gym,finance">Google Trends</a>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Import the packages</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="c1"># Switch to the Seaborn defaults</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># Import the data</span>
<span class="c1"># Check out the first rows</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;multiTimeline.csv&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Month</th>
      <th>diet: (Worldwide)</th>
      <th>gym: (Worldwide)</th>
      <th>finance: (Worldwide)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2004-01</td>
      <td>100</td>
      <td>31</td>
      <td>48</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2004-02</td>
      <td>75</td>
      <td>26</td>
      <td>49</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2004-03</td>
      <td>67</td>
      <td>24</td>
      <td>47</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="c1"># Check out the data types, number of rows and more</span>
<span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 168 entries, 0 to 167
Data columns (total 4 columns):
Month                   168 non-null object
diet: (Worldwide)       168 non-null int64
gym: (Worldwide)        168 non-null int64
finance: (Worldwide)    168 non-null int64
dtypes: int64(3), object(1)
memory usage: 5.3+ KB
</code></pre></div>
</td></tr></table>
<h2 id="wrangle-the-data">Wrangle the Data<a class="headerlink" href="#wrangle-the-data" title="Permanent link">&para;</a></h2>
<p>Rename the columns of the DataFrame <code>df</code> so that they have no whitespaces in them.</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;diet&#39;</span><span class="p">,</span> <span class="s1">&#39;gym&#39;</span><span class="p">,</span> <span class="s1">&#39;finance&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>month</th>
      <th>diet</th>
      <th>gym</th>
      <th>finance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2004-01</td>
      <td>100</td>
      <td>31</td>
      <td>48</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2004-02</td>
      <td>75</td>
      <td>26</td>
      <td>49</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2004-03</td>
      <td>67</td>
      <td>24</td>
      <td>47</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2004-04</td>
      <td>70</td>
      <td>22</td>
      <td>48</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2004-05</td>
      <td>72</td>
      <td>22</td>
      <td>43</td>
    </tr>
  </tbody>
</table>
</div>

<p>Turn the <code>month</code> column into a <code>DateTime</code> data type (vs. <code>object</code>).</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">month</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">month</span><span class="p">)</span>
</code></pre></div>
<p>Make it the index of the DataFrame. Include the <code>inplace</code> argument when setting the index of the DataFrame <code>df</code> so that we alter the original index and set it to the <code>month</code> column.</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>diet</th>
      <th>gym</th>
      <th>finance</th>
    </tr>
    <tr>
      <th>month</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2004-01-01</th>
      <td>100</td>
      <td>31</td>
      <td>48</td>
    </tr>
    <tr>
      <th>2004-02-01</th>
      <td>75</td>
      <td>26</td>
      <td>49</td>
    </tr>
    <tr>
      <th>2004-03-01</th>
      <td>67</td>
      <td>24</td>
      <td>47</td>
    </tr>
    <tr>
      <th>2004-04-01</th>
      <td>70</td>
      <td>22</td>
      <td>48</td>
    </tr>
    <tr>
      <th>2004-05-01</th>
      <td>72</td>
      <td>22</td>
      <td>43</td>
    </tr>
  </tbody>
</table>
</div>

<h2 id="exploratory-data-analysis-eda">Exploratory Data Analysis (EDA)<a class="headerlink" href="#exploratory-data-analysis-eda" title="Permanent link">&para;</a></h2>
<p>Use a built-in <code>pandas</code> visualization method <code>.plot()</code> to plot the data. Specify the label on the x-axis.</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">);</span>
</code></pre></div>
<p><img alt="" src="../img/time_series_analysis/output_12_0.png" /></p>
<p>A value of 100 is the peak popularity for the term. A value of 50 means that the term is half as popular. Likewise a score of 0 means the term was less than 1% as popular as the peak.</p>
<p>Plot one column.</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;diet&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">);</span>
</code></pre></div>
<p><img alt="" src="../img/time_series_analysis/output_14_0.png" /></p>
<h2 id="trends-and-seasonality-in-time-series">Trends and Seasonality in Time Series<a class="headerlink" href="#trends-and-seasonality-in-time-series" title="Permanent link">&para;</a></h2>
<h3 id="identifying-trends-in-time-series">Identifying Trends in Time Series<a class="headerlink" href="#identifying-trends-in-time-series" title="Permanent link">&para;</a></h3>
<p>Take a rolling average to remove the seasonality and see the trend. 12 months for example (before and after each point).</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Extract one column, </span>
<span class="c1"># but do not create a Series with df[&#39;diet&#39;]</span>
<span class="n">diet</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;diet&#39;</span><span class="p">]]</span>

<span class="c1"># Chain: rolling, avg, plot</span>
<span class="n">diet</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;matplotlib.text.Text at 0x7f3c0630c240&gt;
</code></pre></div>
</td></tr></table>
<p><img alt="" src="../img/time_series_analysis/output_16_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Another column</span>
<span class="n">gym</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;gym&#39;</span><span class="p">]]</span>

<span class="c1"># Chain</span>
<span class="n">gym</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;matplotlib.text.Text at 0x7f3c0da837f0&gt;
</code></pre></div>
</td></tr></table>
<p><img alt="" src="../img/time_series_analysis/output_17_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="c1"># Create a new df with both</span>
<span class="n">df_rm</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">diet</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">gym</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Chain</span>
<span class="n">df_rm</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;matplotlib.text.Text at 0x7f3c0621c7f0&gt;
</code></pre></div>
</td></tr></table>
<p><img alt="" src="../img/time_series_analysis/output_18_1.png" /></p>
<h3 id="seasonal-patterns-in-time-series">Seasonal Patterns in Time Series<a class="headerlink" href="#seasonal-patterns-in-time-series" title="Permanent link">&para;</a></h3>
<p>We can remove the trend from the time series by subtracting the rolling mean from the original signal, leaving the seasonality only and turning the data into a stationary time series (such as mean and variance don&rsquo;t change over time). Many time series forecasting methods are based on the assumption that the time series is approximately stationary.</p>
<p>Another way to remove the trend is called &ldquo;differencing&rdquo;.</p>
<h4 id="first-order-differencing">First-order differencing<a class="headerlink" href="#first-order-differencing" title="Permanent link">&para;</a></h4>
<p>Difference between one data point and the one before it.</p>
<p><strong>Second-order differencing</strong> means that we would be looking at the difference between one data point and the two that precede it.</p>
<p><a href="https://www.otexts.org/fpp/8/1">More on differencing</a>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Differencing</span>
<span class="n">diet</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="c1"># Plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">);</span>
</code></pre></div>
<p><img alt="" src="../img/time_series_analysis/output_20_0.png" /></p>
<h3 id="periodicity-and-autocorrelation">Periodicity and Autocorrelation<a class="headerlink" href="#periodicity-and-autocorrelation" title="Permanent link">&para;</a></h3>
<p>A time series is periodic if it repeats itself at equally spaced intervals, say, every 12 months.</p>
<p>Yet another way of thinking about this is that the time series is correlated with itself shifted by 12 months. That means that, if we took the time series and moved it 12 months backwards or forwards, it would map onto itself in some way: autocorrelation.</p>
<h4 id="a-word-about-correlation">A Word about Correlation<a class="headerlink" href="#a-word-about-correlation" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">datasets</span>

<span class="n">iris</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">.</span><span class="n">load_iris</span><span class="p">()</span>

<span class="n">df_iris</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">iris</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">],</span> <span class="n">iris</span><span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">]],</span>
                       <span class="n">columns</span> <span class="o">=</span> <span class="n">iris</span><span class="p">[</span><span class="s1">&#39;feature_names&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;target&#39;</span><span class="p">])</span>
<span class="n">df_iris</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sepal length (cm)</th>
      <th>sepal width (cm)</th>
      <th>petal length (cm)</th>
      <th>petal width (cm)</th>
      <th>target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5.1</td>
      <td>3.5</td>
      <td>1.4</td>
      <td>0.2</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>4.9</td>
      <td>3.0</td>
      <td>1.4</td>
      <td>0.2</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>4.7</td>
      <td>3.2</td>
      <td>1.3</td>
      <td>0.2</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;sepal length (cm)&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;sepal width (cm)&#39;</span><span class="p">,</span>
           <span class="n">fit_reg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_iris</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f3c060fb5f8&gt;
</code></pre></div>
</td></tr></table>
<p><img alt="" src="../img/time_series_analysis/output_23_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;sepal length (cm)&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;sepal width (cm)&#39;</span><span class="p">,</span>
           <span class="n">fit_reg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_iris</span><span class="p">);</span>
</code></pre></div>
<p><img alt="" src="../img/time_series_analysis/output_24_0.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;sepal length (cm)&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;sepal width (cm)&#39;</span><span class="p">,</span>
           <span class="n">fit_reg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df_iris</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;seaborn.axisgrid.FacetGrid at 0x7f3c060b7438&gt;
</code></pre></div>
</td></tr></table>
<p><img alt="" src="../img/time_series_analysis/output_25_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">df_iris</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</code></pre></div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>sepal length (cm)</th>
      <th>sepal width (cm)</th>
      <th>petal length (cm)</th>
      <th>petal width (cm)</th>
      <th>target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>sepal length (cm)</th>
      <td>1.000000</td>
      <td>-0.109369</td>
      <td>0.871754</td>
      <td>0.817954</td>
      <td>0.782561</td>
    </tr>
    <tr>
      <th>sepal width (cm)</th>
      <td>-0.109369</td>
      <td>1.000000</td>
      <td>-0.420516</td>
      <td>-0.356544</td>
      <td>-0.419446</td>
    </tr>
    <tr>
      <th>petal length (cm)</th>
      <td>0.871754</td>
      <td>-0.420516</td>
      <td>1.000000</td>
      <td>0.962757</td>
      <td>0.949043</td>
    </tr>
    <tr>
      <th>petal width (cm)</th>
      <td>0.817954</td>
      <td>-0.356544</td>
      <td>0.962757</td>
      <td>1.000000</td>
      <td>0.956464</td>
    </tr>
    <tr>
      <th>target</th>
      <td>0.782561</td>
      <td>-0.419446</td>
      <td>0.949043</td>
      <td>0.956464</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">df_iris</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;target&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</code></pre></div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>petal length (cm)</th>
      <th>petal width (cm)</th>
      <th>sepal length (cm)</th>
      <th>sepal width (cm)</th>
    </tr>
    <tr>
      <th>target</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="4" valign="top">0.0</th>
      <th>petal length (cm)</th>
      <td>1.000000</td>
      <td>0.306308</td>
      <td>0.263874</td>
      <td>0.176695</td>
    </tr>
    <tr>
      <th>petal width (cm)</th>
      <td>0.306308</td>
      <td>1.000000</td>
      <td>0.279092</td>
      <td>0.279973</td>
    </tr>
    <tr>
      <th>sepal length (cm)</th>
      <td>0.263874</td>
      <td>0.279092</td>
      <td>1.000000</td>
      <td>0.746780</td>
    </tr>
    <tr>
      <th>sepal width (cm)</th>
      <td>0.176695</td>
      <td>0.279973</td>
      <td>0.746780</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">1.0</th>
      <th>petal length (cm)</th>
      <td>1.000000</td>
      <td>0.786668</td>
      <td>0.754049</td>
      <td>0.560522</td>
    </tr>
    <tr>
      <th>petal width (cm)</th>
      <td>0.786668</td>
      <td>1.000000</td>
      <td>0.546461</td>
      <td>0.663999</td>
    </tr>
    <tr>
      <th>sepal length (cm)</th>
      <td>0.754049</td>
      <td>0.546461</td>
      <td>1.000000</td>
      <td>0.525911</td>
    </tr>
    <tr>
      <th>sepal width (cm)</th>
      <td>0.560522</td>
      <td>0.663999</td>
      <td>0.525911</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">2.0</th>
      <th>petal length (cm)</th>
      <td>1.000000</td>
      <td>0.322108</td>
      <td>0.864225</td>
      <td>0.401045</td>
    </tr>
    <tr>
      <th>petal width (cm)</th>
      <td>0.322108</td>
      <td>1.000000</td>
      <td>0.281108</td>
      <td>0.537728</td>
    </tr>
    <tr>
      <th>sepal length (cm)</th>
      <td>0.864225</td>
      <td>0.281108</td>
      <td>1.000000</td>
      <td>0.457228</td>
    </tr>
    <tr>
      <th>sepal width (cm)</th>
      <td>0.401045</td>
      <td>0.537728</td>
      <td>0.457228</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>

<h4 id="periodicity-and-autocorrelation-continued">Periodicity and Autocorrelation (continued)<a class="headerlink" href="#periodicity-and-autocorrelation-continued" title="Permanent link">&para;</a></h4>
<p>The time series again.</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;matplotlib.text.Text at 0x7f3c062fd390&gt;
</code></pre></div>
</td></tr></table>
<p><img alt="" src="../img/time_series_analysis/output_29_1.png" /></p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</code></pre></div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>diet</th>
      <th>gym</th>
      <th>finance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>diet</th>
      <td>1.000000</td>
      <td>-0.100764</td>
      <td>-0.034639</td>
    </tr>
    <tr>
      <th>gym</th>
      <td>-0.100764</td>
      <td>1.000000</td>
      <td>-0.284279</td>
    </tr>
    <tr>
      <th>finance</th>
      <td>-0.034639</td>
      <td>-0.284279</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>

<p><code>diet</code> and <code>gym</code> are negatively correlated. However, from looking at the times series, it looks as though their seasonal components would be positively correlated and their trends negatively correlated. The actual correlation coefficient is actually capturing both of those.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># first-order differences</span>
<span class="n">df</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;matplotlib.text.Text at 0x7f3c05fcfac8&gt;
</code></pre></div>
</td></tr></table>
<p><img alt="" src="../img/time_series_analysis/output_32_1.png" /></p>
<p><code>diet</code> and <code>gym</code> are incredibly correlated once we remove the trend.</p>
<div class="highlight"><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</code></pre></div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>diet</th>
      <th>gym</th>
      <th>finance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>diet</th>
      <td>1.000000</td>
      <td>0.758707</td>
      <td>0.373828</td>
    </tr>
    <tr>
      <th>gym</th>
      <td>0.758707</td>
      <td>1.000000</td>
      <td>0.301111</td>
    </tr>
    <tr>
      <th>finance</th>
      <td>0.373828</td>
      <td>0.301111</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>

<h4 id="autocorrelation">Autocorrelation<a class="headerlink" href="#autocorrelation" title="Permanent link">&para;</a></h4>
<p>Autocorrelation of the &lsquo;diet&rsquo; series: on the x-axis, we have the lag and on the y-axis, we have how correlated the time series is with itself at that lag.</p>
<p>So, this means that if the original time series repeats itself every two days, we would expect to see a spike in the autocorrelation function at 2 days.</p>
<div class="highlight"><pre><span></span><code><span class="n">pd</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">autocorrelation_plot</span><span class="p">(</span><span class="n">diet</span><span class="p">)</span>
</code></pre></div>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f3c05f587b8&gt;
</code></pre></div>
</td></tr></table>
<p><img alt="" src="../img/time_series_analysis/output_36_1.png" /></p>
<p>This is 12 months at which we have this huge peak in correlation. We have another peak at a 24 month interval, where it&rsquo;s also correlated with itself. We have another peak at 36, but as we move further away, there&rsquo;s less and less of a correlation.</p>
<p>The dotted lines in the above plot actually tell us about the statistical significance of the correlation.</p>
<h2 id="forecasts-arima">Forecasts, ARIMA&hellip;<a class="headerlink" href="#forecasts-arima" title="Permanent link">&para;</a></h2>
<p>Use ARIMA modeling to make some time series forecasts as to what these search trends will look like over the coming years.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../sentiment_analysis_with_twitter/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Sentiment Analysis with Twitter" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Sentiment Analysis with Twitter
            </div>
          </div>
        </a>
      
      
        
        <a href="../vectors_and_arrays_linear_algebra/" class="md-footer__link md-footer__link--next" aria-label="Next: Vectors and Arrays (Linear Algebra)" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Vectors and Arrays (Linear Algebra)
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.f8263e09.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.4fc53ad4.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>